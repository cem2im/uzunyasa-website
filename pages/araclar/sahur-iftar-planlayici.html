<!DOCTYPE html>
<html lang="tr">
<head>
<link rel="icon" type="image/png" sizes="32x32" href="/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16.png">
<script src="/scripts/https-redirect.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QBM7E0EHFP"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());
 gtag('config', 'G-QBM7E0EHFP');
</script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sahur & Ä°ftar Ã–ÄŸÃ¼n PlanlayÄ±cÄ±sÄ± â€” Ramazan Beslenme Rehberi | UzunYaÅŸa</title>
<meta name="description" content="Ramazan ayÄ±na Ã¶zel kiÅŸiselleÅŸtirilmiÅŸ sahur ve iftar Ã¶ÄŸÃ¼n planÄ± oluÅŸturun. Kalori, makro hesaplama ve TÃ¼rk mutfaÄŸÄ±ndan saÄŸlÄ±klÄ± yemek Ã¶nerileri.">
<link rel="canonical" href="https://uzunyasa.com/pages/araclar/sahur-iftar-planlayici.html">
<meta property="og:title" content="Sahur & Ä°ftar Ã–ÄŸÃ¼n PlanlayÄ±cÄ±sÄ± â€” Ramazan Beslenme Rehberi | UzunYaÅŸa">
<meta property="og:description" content="KiÅŸiselleÅŸtirilmiÅŸ Ramazan Ã¶ÄŸÃ¼n planÄ±: sahur ve iftar iÃ§in kalori, makro ve TÃ¼rk yemek Ã¶nerileri.">
<meta property="og:image" content="https://uzunyasa.com/images/og-default.png">
<meta property="og:url" content="https://uzunyasa.com/pages/araclar/sahur-iftar-planlayici.html">
<meta property="og:type" content="website">
<meta property="og:locale" content="tr_TR">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<style>
:root{
  --primary:#0D7377;--dark:#195157;--accent:#E8963E;
  --protein:#E8963E;--fat:#dc2626;--carb:#2D9F4F;--water:#3b82f6;
  --bg:#f8fafa;--card:#fff;
  --gray-50:#f9fafb;--gray-100:#f3f4f6;--gray-200:#e5e7eb;--gray-300:#d1d5db;
  --gray-400:#9ca3af;--gray-500:#6b7280;--gray-600:#4b5563;--gray-700:#374151;--gray-900:#111827;
  --radius:16px;--shadow:0 4px 24px rgba(0,0,0,.08);
  --ramadan-gold:#E8963E;--ramadan-deep:#1a1a2e;--ramadan-purple:#16213e;
}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--gray-700);line-height:1.6;min-height:100vh;display:flex;flex-direction:column}
.playfair{font-family:'Playfair Display',serif}

/* Header */
.site-header{background:#fff;border-bottom:1px solid var(--gray-200);padding:.875rem 1.5rem;position:sticky;top:0;z-index:100;display:flex;align-items:center;justify-content:space-between}
.site-header a{text-decoration:none;display:flex;align-items:center;gap:.5rem}
.logo-text{font-family:'Playfair Display',serif;font-size:1.35rem;font-weight:700;color:var(--dark)}
.logo-text span{color:var(--accent)}
.back-link{font-size:.875rem;color:var(--primary);font-weight:600;text-decoration:none;display:flex;align-items:center;gap:.25rem}

/* Main */
.main-wrap{max-width:800px;margin:0 auto;padding:1rem;width:100%;flex:1}

/* Hero */
.hero{text-align:center;padding:2.5rem 1rem 2rem;position:relative;overflow:hidden}
.hero::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg,rgba(13,115,119,.04),rgba(232,150,62,.06));border-radius:var(--radius);z-index:0}
.hero>*{position:relative;z-index:1}
.hero-icon{font-size:3.5rem;margin-bottom:.75rem;display:block;animation:float 3s ease-in-out infinite}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
.hero h1{font-family:'Playfair Display',serif;font-size:2rem;color:var(--dark);margin-bottom:.5rem;line-height:1.2}
.hero p{color:var(--gray-500);max-width:500px;margin:0 auto;font-size:.95rem}

/* Cards */
.card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;margin-bottom:1.25rem;transition:transform .2s}
.card-header{padding:1.25rem 1.5rem;border-bottom:1px solid var(--gray-100);display:flex;align-items:center;gap:.75rem}
.card-header .icon{font-size:1.5rem}
.card-header h2{font-family:'Playfair Display',serif;font-size:1.2rem;color:var(--dark);flex:1}
.card-header .step{background:var(--primary);color:#fff;width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.8rem;font-weight:700;flex-shrink:0}
.card-body{padding:1.25rem 1.5rem}

/* Form elements */
.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
.form-group{display:flex;flex-direction:column;gap:.35rem}
.form-group.full{grid-column:1/-1}
.form-label{font-size:.8rem;font-weight:600;color:var(--gray-600);text-transform:uppercase;letter-spacing:.3px}
.form-input{padding:.7rem 1rem;border:2px solid var(--gray-200);border-radius:12px;font-size:.95rem;font-family:inherit;transition:border-color .2s;background:#fff;color:var(--gray-700);width:100%}
.form-input:focus{outline:none;border-color:var(--primary)}
select.form-input{cursor:pointer;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath d='M6 8L1 3h10z' fill='%239ca3af'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 1rem center}

/* Checkboxes */
.checkbox-grid{display:grid;grid-template-columns:1fr 1fr;gap:.5rem}
.checkbox-item{display:flex;align-items:center;gap:.5rem;padding:.5rem .75rem;border:2px solid var(--gray-200);border-radius:10px;cursor:pointer;transition:all .2s;font-size:.85rem}
.checkbox-item:hover{border-color:var(--primary);background:rgba(13,115,119,.03)}
.checkbox-item.checked{border-color:var(--primary);background:rgba(13,115,119,.06)}
.checkbox-item input{display:none}
.checkbox-box{width:18px;height:18px;border:2px solid var(--gray-300);border-radius:5px;display:flex;align-items:center;justify-content:center;transition:all .2s;flex-shrink:0}
.checkbox-item.checked .checkbox-box{background:var(--primary);border-color:var(--primary)}
.checkbox-item.checked .checkbox-box::after{content:'âœ“';color:#fff;font-size:.7rem;font-weight:700}

/* Goal buttons */
.goal-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:.75rem}
.goal-btn{padding:1rem .5rem;border:2px solid var(--gray-200);border-radius:12px;background:#fff;cursor:pointer;text-align:center;transition:all .2s;font-family:inherit}
.goal-btn:hover{border-color:var(--primary);transform:translateY(-2px)}
.goal-btn.active{border-color:var(--primary);background:rgba(13,115,119,.06);box-shadow:0 0 0 3px rgba(13,115,119,.1)}
.goal-btn .emoji{font-size:1.5rem;display:block;margin-bottom:.25rem}
.goal-btn .label{font-size:.8rem;font-weight:600;color:var(--dark)}

/* Buttons */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.9rem 2.5rem;border-radius:99px;border:none;font-size:1rem;font-weight:700;cursor:pointer;transition:all .2s;font-family:inherit}
.btn-primary{background:var(--primary);color:#fff}.btn-primary:hover{background:var(--dark);transform:translateY(-1px)}
.btn-accent{background:var(--accent);color:#fff}.btn-accent:hover{filter:brightness(1.1);transform:translateY(-1px)}
.btn-outline{background:transparent;border:2px solid var(--primary);color:var(--primary)}.btn-outline:hover{background:var(--primary);color:#fff}
.btn-sm{padding:.6rem 1.25rem;font-size:.85rem}
.btn:disabled{opacity:.5;cursor:not-allowed;transform:none!important}
.btn-area{text-align:center;padding:1rem 0}

/* Results section */
#resultsSection{display:none}
#resultsSection.show{display:block;animation:slideUp .5s ease}

/* Summary banner */
.summary-banner{background:linear-gradient(135deg,var(--dark),var(--primary));color:#fff;border-radius:var(--radius);padding:1.5rem;margin-bottom:1.25rem;position:relative;overflow:hidden}
.summary-banner::before{content:'â˜ª';position:absolute;right:-10px;top:-10px;font-size:6rem;opacity:.08}
.summary-banner h3{font-family:'Playfair Display',serif;font-size:1.3rem;margin-bottom:1rem}
.summary-stats{display:grid;grid-template-columns:repeat(4,1fr);gap:.75rem}
.stat-item{text-align:center}
.stat-value{font-size:1.5rem;font-weight:800;line-height:1}
.stat-label{font-size:.7rem;opacity:.8;margin-top:.2rem;text-transform:uppercase;letter-spacing:.5px}

/* Macro bars */
.macro-bars{display:flex;flex-direction:column;gap:.6rem;margin:1rem 0}
.macro-bar-row{display:flex;align-items:center;gap:.75rem}
.macro-bar-label{width:70px;font-size:.8rem;font-weight:600;display:flex;align-items:center;gap:.35rem}
.macro-bar-track{flex:1;height:10px;background:var(--gray-100);border-radius:99px;overflow:hidden;position:relative}
.macro-bar-fill{height:100%;border-radius:99px;transition:width .8s ease;position:relative}
.macro-bar-fill.protein{background:linear-gradient(90deg,#fbbf24,var(--protein))}
.macro-bar-fill.fat{background:linear-gradient(90deg,#f87171,var(--fat))}
.macro-bar-fill.carb{background:linear-gradient(90deg,#6ee7b7,var(--carb))}
.macro-bar-value{width:50px;text-align:right;font-size:.85rem;font-weight:700;font-variant-numeric:tabular-nums}

/* Meal card */
.meal-card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);margin-bottom:1.25rem;overflow:hidden}
.meal-card-header{padding:1.25rem 1.5rem;display:flex;align-items:center;gap:.75rem;cursor:pointer;user-select:none;transition:background .2s}
.meal-card-header:hover{background:var(--gray-50)}
.meal-card-header .meal-icon{font-size:2rem}
.meal-card-header .meal-info{flex:1}
.meal-card-header .meal-title{font-family:'Playfair Display',serif;font-size:1.15rem;color:var(--dark)}
.meal-card-header .meal-subtitle{font-size:.8rem;color:var(--gray-500)}
.meal-card-header .meal-cal{text-align:right}
.meal-card-header .meal-cal-value{font-size:1.3rem;font-weight:800;color:var(--primary)}
.meal-card-header .meal-cal-unit{font-size:.7rem;color:var(--gray-400)}
.meal-card-header .expand-icon{font-size:1.2rem;color:var(--gray-400);transition:transform .3s}
.meal-card.expanded .expand-icon{transform:rotate(180deg)}
.meal-card-body{max-height:0;overflow:hidden;transition:max-height .4s ease}
.meal-card.expanded .meal-card-body{max-height:2000px}
.meal-card-content{padding:0 1.5rem 1.5rem}

/* Food items */
.food-list{list-style:none}
.food-item{display:flex;align-items:center;gap:.75rem;padding:.75rem 0;border-bottom:1px solid var(--gray-100)}
.food-item:last-child{border-bottom:none}
.food-item-icon{font-size:1.3rem;width:36px;height:36px;display:flex;align-items:center;justify-content:center;background:var(--gray-50);border-radius:10px;flex-shrink:0}
.food-item-info{flex:1}
.food-item-name{font-size:.9rem;font-weight:600;color:var(--dark)}
.food-item-portion{font-size:.75rem;color:var(--gray-400)}
.food-item-macros{display:flex;gap:.5rem;font-size:.7rem;font-weight:600}
.food-item-macros .m-p{color:var(--protein)}
.food-item-macros .m-f{color:var(--fat)}
.food-item-macros .m-c{color:var(--carb)}
.food-item-cal{font-size:.85rem;font-weight:700;color:var(--gray-600);min-width:50px;text-align:right}
.food-swap-btn{width:34px;height:34px;border-radius:50%;border:2px solid var(--gray-200);background:#fff;cursor:pointer;font-size:.9rem;display:flex;align-items:center;justify-content:center;transition:all .2s;flex-shrink:0;margin-left:.5rem}
.food-swap-btn:hover{border-color:var(--primary);background:rgba(13,115,119,.06);transform:rotate(180deg)}
.food-swap-btn:active{transform:rotate(360deg);background:rgba(13,115,119,.12)}

/* â•â• BOWL BUILDER / MENÃœ â•â• */
.menu-builder{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);margin-bottom:1.25rem;overflow:hidden}
.menu-builder-header{padding:1.25rem 1.5rem;border-bottom:1px solid var(--gray-100);display:flex;align-items:center;gap:.75rem;cursor:pointer;user-select:none}
.menu-builder-header:hover{background:var(--gray-50)}
.menu-builder-header h2{font-family:'Playfair Display',serif;font-size:1.15rem;color:var(--dark);flex:1}
.menu-builder-header .expand-icon{font-size:1.2rem;color:var(--gray-400);transition:transform .3s}
.menu-builder.open .expand-icon{transform:rotate(180deg)}
.menu-builder-body{max-height:0;overflow:hidden;transition:max-height .4s ease}
.menu-builder.open .menu-builder-body{max-height:5000px}
.menu-builder-content{padding:1rem 1.5rem}

/* Meal selector tabs */
.meal-tabs{display:flex;gap:.5rem;margin-bottom:1rem;overflow-x:auto;padding-bottom:.25rem}
.meal-tab{padding:.6rem 1.25rem;border-radius:99px;border:2px solid var(--gray-200);background:#fff;cursor:pointer;font-size:.85rem;font-weight:600;font-family:inherit;white-space:nowrap;transition:all .2s}
.meal-tab:hover{border-color:var(--primary)}
.meal-tab.active{background:var(--primary);color:#fff;border-color:var(--primary)}
.meal-tab .tab-cal{font-size:.75rem;opacity:.7;margin-left:.25rem}

/* Category pills */
.cat-pills{display:flex;gap:.4rem;overflow-x:auto;padding-bottom:.5rem;margin-bottom:1rem;-webkit-overflow-scrolling:touch}
.cat-pill{padding:.45rem .9rem;border-radius:99px;border:1.5px solid var(--gray-200);background:#fff;cursor:pointer;font-size:.75rem;font-weight:600;font-family:inherit;white-space:nowrap;transition:all .2s;color:var(--gray-600)}
.cat-pill:hover{border-color:var(--primary);color:var(--primary)}
.cat-pill.active{background:var(--primary);color:#fff;border-color:var(--primary)}
.cat-pill .cat-count{font-size:.65rem;opacity:.6;margin-left:.2rem}

/* Food menu grid */
.menu-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:.6rem;max-height:400px;overflow-y:auto;padding-right:.25rem}
.menu-food{display:flex;align-items:center;gap:.6rem;padding:.65rem .75rem;border:2px solid var(--gray-100);border-radius:12px;cursor:pointer;transition:all .15s;background:#fff;min-height:60px}
.menu-food:hover{border-color:var(--primary);background:rgba(13,115,119,.02);transform:translateY(-1px)}
.menu-food:active{transform:scale(.98)}
.menu-food.in-meal{border-color:var(--accent);background:rgba(232,150,62,.06)}
.menu-food.in-meal::after{content:'âœ“';position:absolute;top:4px;right:8px;font-size:.65rem;color:var(--accent);font-weight:700}
.menu-food{position:relative}
.menu-food .mf-icon{font-size:1.5rem;flex-shrink:0}
.menu-food .mf-info{flex:1;min-width:0}
.menu-food .mf-name{font-size:.8rem;font-weight:600;color:var(--dark);line-height:1.2;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.menu-food .mf-meta{font-size:.65rem;color:var(--gray-400);margin-top:.1rem}
.menu-food .mf-macros{font-size:.6rem;color:var(--gray-400);margin-top:.1rem;font-weight:500}
.menu-food .mf-cal{font-size:.8rem;font-weight:700;color:var(--primary);flex-shrink:0;text-align:center;min-width:40px}
.menu-food .mf-add{width:26px;height:26px;border-radius:50%;border:2px solid var(--gray-200);display:flex;align-items:center;justify-content:center;font-size:.75rem;flex-shrink:0;transition:all .15s;background:#fff}
.menu-food:hover .mf-add{border-color:var(--primary);color:var(--primary)}
.menu-food.in-meal .mf-add{background:var(--accent);border-color:var(--accent);color:#fff}

/* Selected foods basket */
.basket{background:var(--gray-50);border-radius:12px;padding:1rem;margin-bottom:1rem;min-height:60px}
.basket-title{font-size:.8rem;font-weight:700;color:var(--gray-500);text-transform:uppercase;letter-spacing:.5px;margin-bottom:.5rem;display:flex;align-items:center;justify-content:space-between}
.basket-items{display:flex;flex-wrap:wrap;gap:.4rem}
.basket-chip{display:inline-flex;align-items:center;gap:.3rem;padding:.35rem .7rem;background:#fff;border:1.5px solid var(--gray-200);border-radius:20px;font-size:.75rem;font-weight:500;cursor:pointer;transition:all .15s}
.basket-chip:hover{border-color:#ef4444;background:#fef2f2}
.basket-chip:hover .chip-x{color:#ef4444}
.chip-x{font-size:.65rem;color:var(--gray-400);margin-left:.15rem}
.basket-empty{font-size:.8rem;color:var(--gray-400);font-style:italic}

/* Running total bar */
.running-total{display:flex;align-items:center;justify-content:space-between;background:linear-gradient(135deg,var(--dark),var(--primary));color:#fff;border-radius:10px;padding:.65rem 1rem;margin-bottom:1rem;font-size:.8rem}
.running-total .rt-cal{font-size:1.1rem;font-weight:800}
.running-total .rt-macros{display:flex;gap:.75rem;font-size:.7rem}
.running-total .rt-macros span{opacity:.85}

@media(max-width:600px){
  .menu-grid{grid-template-columns:1fr}
  .menu-builder-content{padding:.75rem 1rem}
}
/* Builder intro text */
.builder-intro{font-size:.85rem;color:var(--gray-500);margin-bottom:1rem;padding:.75rem 1rem;background:linear-gradient(135deg,rgba(13,115,119,.04),rgba(232,150,62,.06));border-radius:10px;text-align:center;line-height:1.5}

/* Target progress bar */
.target-progress{margin-bottom:1rem;background:var(--gray-50);border-radius:12px;padding:.75rem 1rem}
.target-progress-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.4rem}
.target-label{font-size:.8rem;font-weight:600;color:var(--gray-600)}
.target-current{font-size:.85rem;font-weight:700;color:var(--primary)}
.target-bar{height:8px;background:var(--gray-200);border-radius:99px;overflow:hidden}
.target-bar-fill{height:100%;border-radius:99px;background:linear-gradient(90deg,var(--primary),var(--accent));transition:width .4s ease}
.target-bar-fill.over{background:linear-gradient(90deg,#ef4444,#dc2626)}
.target-bar-fill.perfect{background:linear-gradient(90deg,#22c55e,#16a34a)}

/* â•â• SHOPPING LIST â•â• */
.shopping-card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);margin-bottom:1.25rem;overflow:hidden}
.shopping-card-header{padding:1.25rem 1.5rem;border-bottom:1px solid var(--gray-100);display:flex;align-items:center;gap:.75rem;cursor:pointer;user-select:none}
.shopping-card-header:hover{background:var(--gray-50)}
.shopping-card-header h2{font-family:'Playfair Display',serif;font-size:1.15rem;color:var(--dark);flex:1}
.shopping-card-header .expand-icon{font-size:1.2rem;color:var(--gray-400);transition:transform .3s}
.shopping-card.expanded .expand-icon{transform:rotate(180deg)}
.shopping-card-body{max-height:0;overflow:hidden;transition:max-height .4s ease}
.shopping-card.expanded .shopping-card-body{max-height:5000px}
.shopping-card-content{padding:1rem 1.5rem}

.shopping-day-tabs{display:flex;gap:.4rem;margin-bottom:1rem;overflow-x:auto;padding-bottom:.25rem}
.shopping-day-tab{padding:.5rem 1rem;border-radius:99px;border:2px solid var(--gray-200);background:#fff;cursor:pointer;font-size:.8rem;font-weight:600;font-family:inherit;white-space:nowrap;transition:all .2s}
.shopping-day-tab:hover{border-color:var(--primary)}
.shopping-day-tab.active{background:var(--primary);color:#fff;border-color:var(--primary)}

.shopping-category{margin-bottom:1rem}
.shopping-cat-header{display:flex;align-items:center;gap:.5rem;padding:.5rem 0;border-bottom:2px solid var(--gray-100);margin-bottom:.5rem}
.shopping-cat-header .sc-icon{font-size:1.1rem}
.shopping-cat-header .sc-name{font-size:.85rem;font-weight:700;color:var(--dark)}
.shopping-cat-header .sc-count{font-size:.7rem;color:var(--gray-400);margin-left:auto}

.shopping-item{display:flex;align-items:center;gap:.6rem;padding:.5rem .25rem;border-bottom:1px solid var(--gray-50);cursor:pointer;transition:all .15s;border-radius:6px}
.shopping-item:hover{background:var(--gray-50)}
.shopping-item.checked{opacity:.5}
.shopping-item.checked .si-name{text-decoration:line-through}
.si-check{width:22px;height:22px;border:2px solid var(--gray-300);border-radius:6px;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all .2s;font-size:.65rem}
.shopping-item.checked .si-check{background:var(--primary);border-color:var(--primary);color:#fff}
.shopping-item.checked .si-check::after{content:'âœ“'}
.si-icon{font-size:1rem;flex-shrink:0}
.si-name{font-size:.85rem;font-weight:500;color:var(--gray-700);flex:1}
.si-portion{font-size:.75rem;color:var(--gray-400);flex-shrink:0;text-align:right}

.shopping-summary{background:linear-gradient(135deg,rgba(13,115,119,.06),rgba(232,150,62,.04));border-radius:10px;padding:.75rem 1rem;margin-bottom:1rem;display:flex;justify-content:space-between;align-items:center;font-size:.8rem}
.shopping-summary .ss-total{font-weight:700;color:var(--dark)}
.shopping-summary .ss-checked{color:var(--primary);font-weight:600}

.shopping-actions{display:flex;gap:.5rem;justify-content:center;flex-wrap:wrap;margin-top:.75rem}

@media print{
  .shopping-card{break-inside:avoid;box-shadow:none;border:1px solid #ddd}
  .shopping-card-body{max-height:none!important;overflow:visible!important}
  .shopping-item.checked{opacity:.4}
  .shopping-actions,.shopping-day-tabs{display:none!important}
}

.food-item.swapping{animation:swapAnim .3s ease}
@keyframes swapAnim{0%{opacity:1;transform:translateX(0)}50%{opacity:0;transform:translateX(20px)}100%{opacity:1;transform:translateX(0)}}

/* Meal macro summary */
.meal-macro-summary{background:var(--gray-50);border-radius:12px;padding:1rem;margin-top:.75rem}
.meal-macro-summary h4{font-size:.75rem;text-transform:uppercase;letter-spacing:.5px;color:var(--gray-500);margin-bottom:.5rem}
.mini-macro-bars{display:grid;grid-template-columns:repeat(3,1fr);gap:.5rem}
.mini-macro{text-align:center}
.mini-macro .bar{height:6px;background:var(--gray-200);border-radius:99px;overflow:hidden;margin-bottom:.25rem}
.mini-macro .bar-fill{height:100%;border-radius:99px}
.mini-macro .val{font-size:.8rem;font-weight:700}
.mini-macro .lbl{font-size:.65rem;color:var(--gray-400);text-transform:uppercase}

/* Hydration card */
.hydration-card{background:linear-gradient(135deg,#eff6ff,#dbeafe);border:2px solid #93c5fd;border-radius:var(--radius);padding:1.5rem;margin-bottom:1.25rem}
.hydration-card h3{color:#1e40af;font-family:'Playfair Display',serif;font-size:1.1rem;margin-bottom:.75rem;display:flex;align-items:center;gap:.5rem}
.hydration-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
.hydration-item{text-align:center}
.hydration-item .h-value{font-size:1.8rem;font-weight:800;color:#1e40af}
.hydration-item .h-label{font-size:.75rem;color:#3b82f6}
.hydration-schedule{margin-top:1rem;display:flex;flex-direction:column;gap:.4rem}
.hydration-time{display:flex;align-items:center;gap:.5rem;font-size:.8rem;color:#1e3a5f;padding:.4rem .75rem;background:rgba(255,255,255,.6);border-radius:8px}
.hydration-time .ht-icon{font-size:1rem}

/* Tips card */
.tips-card{background:linear-gradient(135deg,#fefce8,#fef3c7);border:2px solid #fbbf24;border-radius:var(--radius);padding:1.5rem;margin-bottom:1.25rem}
.tips-card h3{color:#92400e;font-family:'Playfair Display',serif;font-size:1.1rem;margin-bottom:.75rem;display:flex;align-items:center;gap:.5rem}
.tips-list{list-style:none;display:flex;flex-direction:column;gap:.5rem}
.tips-list li{font-size:.85rem;color:#78350f;display:flex;align-items:flex-start;gap:.5rem;padding:.4rem 0}
.tips-list li::before{content:'ğŸ’¡';font-size:.85rem;flex-shrink:0}

/* Warning card */
.warning-card{background:linear-gradient(135deg,#fef2f2,#fee2e2);border:2px solid #f87171;border-radius:var(--radius);padding:1.5rem;margin-bottom:1.25rem;display:none}
.warning-card.show{display:block;animation:slideUp .4s ease}
.warning-card h3{color:#991b1b;font-family:'Playfair Display',serif;font-size:1.1rem;margin-bottom:.75rem;display:flex;align-items:center;gap:.5rem}
.warning-list{list-style:none;display:flex;flex-direction:column;gap:.5rem}
.warning-list li{font-size:.85rem;color:#7f1d1d;display:flex;align-items:flex-start;gap:.5rem;padding:.4rem 0}
.warning-list li .w-icon{font-size:.85rem;flex-shrink:0}

/* Action buttons */
.action-bar{display:flex;gap:.75rem;justify-content:center;flex-wrap:wrap;margin:1.5rem 0}

/* Footer */
.site-footer{background:var(--dark);color:rgba(255,255,255,.7);text-align:center;padding:2rem 1.5rem;font-size:.8rem;margin-top:auto}
.site-footer a{color:var(--accent);text-decoration:none}

/* Animations */
@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.slide-up{animation:slideUp .4s ease}

/* Print */
@media print{
  .site-header,.site-footer,.action-bar,.btn-area,#inputSection,.no-print{display:none!important}
  body{background:#fff;font-size:12px}
  .main-wrap{max-width:100%;padding:0}
  .card,.meal-card,.summary-banner,.hydration-card,.tips-card,.warning-card{box-shadow:none;break-inside:avoid;border:1px solid #ddd}
  .meal-card-body{max-height:none!important;overflow:visible!important}
  .summary-banner{background:var(--primary)!important;-webkit-print-color-adjust:exact;print-color-adjust:exact}
  .macro-bar-fill,.bar-fill{-webkit-print-color-adjust:exact;print-color-adjust:exact}
}

/* Responsive */
@media(max-width:600px){
  .hero h1{font-size:1.6rem}
  .form-grid{grid-template-columns:1fr}
  .goal-grid{grid-template-columns:repeat(3,1fr);gap:.5rem}
  .goal-btn{padding:.75rem .35rem}
  .goal-btn .emoji{font-size:1.2rem}
  .goal-btn .label{font-size:.7rem}
  .checkbox-grid{grid-template-columns:1fr}
  .summary-stats{grid-template-columns:repeat(2,1fr);gap:.5rem}
  .hydration-grid{grid-template-columns:1fr}
  .card-body{padding:1rem}
  .card-header{padding:1rem}
  .meal-card-content{padding:0 1rem 1rem}
  .meal-card-header{padding:1rem}
  .action-bar{flex-direction:column;align-items:center}
}
@media(max-width:380px){
  .goal-grid{grid-template-columns:1fr}
}
</style>
</head>
<body>

<header class="site-header">
 <a href="/index.html">
  <span class="logo-text">Uzun<span>YaÅŸa</span></span>
 </a>
 <a href="/pages/araclar.html" class="back-link">â† AraÃ§lar</a>
</header>

<div class="main-wrap">

<!-- Hero -->
<div class="hero">
 <span class="hero-icon">â˜ªï¸</span>
 <h1>Sahur & Ä°ftar Ã–ÄŸÃ¼n PlanlayÄ±cÄ±sÄ±</h1>
 <p>Ramazan ayÄ±na Ã¶zel, kiÅŸiselleÅŸtirilmiÅŸ beslenme planÄ±nÄ±zÄ± oluÅŸturun. SaÄŸlÄ±klÄ± oruÃ§ tutmanÄ±n anahtarÄ± doÄŸru beslenmedir.</p>
</div>

<!-- Input Section -->
<div id="inputSection">

 <!-- Step 1: Personal Info -->
 <div class="card slide-up">
  <div class="card-header">
   <div class="step">1</div>
   <h2>KiÅŸisel Bilgileriniz</h2>
   <span class="icon">ğŸ“‹</span>
  </div>
  <div class="card-body">
   <div class="form-grid">
    <div class="form-group">
     <label class="form-label">Boy (cm)</label>
     <input type="number" class="form-input" id="height" placeholder="170" min="100" max="250" value="">
    </div>
    <div class="form-group">
     <label class="form-label">Kilo (kg)</label>
     <input type="number" class="form-input" id="weight" placeholder="70" min="30" max="300" value="">
    </div>
    <div class="form-group">
     <label class="form-label">YaÅŸ</label>
     <input type="number" class="form-input" id="age" placeholder="30" min="12" max="100" value="">
    </div>
    <div class="form-group">
     <label class="form-label">Cinsiyet</label>
     <select class="form-input" id="gender">
      <option value="">SeÃ§iniz</option>
      <option value="male">Erkek</option>
      <option value="female">KadÄ±n</option>
     </select>
    </div>
    <div class="form-group full">
     <label class="form-label">Aktivite DÃ¼zeyi</label>
     <select class="form-input" id="activity">
      <option value="">SeÃ§iniz</option>
      <option value="sedentary">Hareketsiz (masa baÅŸÄ± iÅŸ)</option>
      <option value="light">Hafif aktif (haftada 1-3 gÃ¼n egzersiz)</option>
      <option value="moderate">Orta aktif (haftada 3-5 gÃ¼n egzersiz)</option>
      <option value="active">Aktif (haftada 6-7 gÃ¼n egzersiz)</option>
      <option value="very_active">Ã‡ok aktif (fiziksel iÅŸ + egzersiz)</option>
     </select>
    </div>
   </div>
  </div>
 </div>

 <!-- Step 2: Goal -->
 <div class="card slide-up" style="animation-delay:.1s">
  <div class="card-header">
   <div class="step">2</div>
   <h2>Hedefiniz</h2>
   <span class="icon">ğŸ¯</span>
  </div>
  <div class="card-body">
   <div class="goal-grid">
    <button class="goal-btn" data-goal="lose" onclick="selectGoal(this)">
     <span class="emoji">â¬‡ï¸</span>
     <span class="label">Kilo Verme</span>
    </button>
    <button class="goal-btn active" data-goal="maintain" onclick="selectGoal(this)">
     <span class="emoji">âš–ï¸</span>
     <span class="label">Kilo Koruma</span>
    </button>
    <button class="goal-btn" data-goal="gain" onclick="selectGoal(this)">
     <span class="emoji">â¬†ï¸</span>
     <span class="label">Kilo Alma</span>
    </button>
   </div>
  </div>
 </div>

 <!-- Step 3: Health Conditions -->
 <div class="card slide-up" style="animation-delay:.2s">
  <div class="card-header">
   <div class="step">3</div>
   <h2>SaÄŸlÄ±k Durumunuz</h2>
   <span class="icon">ğŸ¥</span>
  </div>
  <div class="card-body">
   <p style="font-size:.85rem;color:var(--gray-500);margin-bottom:1rem">Varsa saÄŸlÄ±k durumlarÄ±nÄ±zÄ± iÅŸaretleyin (opsiyonel):</p>
   <div class="checkbox-grid">
    <label class="checkbox-item" onclick="toggleCheck(this)">
     <input type="checkbox" value="diabetes">
     <div class="checkbox-box"></div>
     <span>ğŸ©¸ Diyabet</span>
    </label>
    <label class="checkbox-item" onclick="toggleCheck(this)">
     <input type="checkbox" value="hypertension">
     <div class="checkbox-box"></div>
     <span>ğŸ’“ Hipertansiyon</span>
    </label>
    <label class="checkbox-item" onclick="toggleCheck(this)">
     <input type="checkbox" value="kidney">
     <div class="checkbox-box"></div>
     <span>ğŸ«˜ BÃ¶brek HastalÄ±ÄŸÄ±</span>
    </label>
    <label class="checkbox-item" onclick="toggleCheck(this)">
     <input type="checkbox" value="heart">
     <div class="checkbox-box"></div>
     <span>â¤ï¸ Kalp HastalÄ±ÄŸÄ±</span>
    </label>
    <label class="checkbox-item" onclick="toggleCheck(this)">
     <input type="checkbox" value="stomach">
     <div class="checkbox-box"></div>
     <span>ğŸ¤¢ Mide RahatsÄ±zlÄ±ÄŸÄ±</span>
    </label>
    <label class="checkbox-item" onclick="toggleCheck(this)">
     <input type="checkbox" value="pregnancy">
     <div class="checkbox-box"></div>
     <span>ğŸ¤° Hamilelik</span>
    </label>
   </div>
  </div>
 </div>

 <!-- Calculate Button -->
 <div class="btn-area" style="display:flex;flex-direction:column;align-items:center;gap:.75rem">
  <button class="btn btn-primary" onclick="generatePlan()" style="font-size:1.1rem;padding:1rem 3rem">
   â˜ªï¸ Otomatik Plan OluÅŸtur
  </button>
  <span style="font-size:.8rem;color:var(--gray-400);font-weight:600">â€” veya â€”</span>
  <button class="btn btn-accent" onclick="buildOwnPlan()" style="font-size:1rem;padding:.85rem 2.5rem">
   ğŸ½ï¸ Kendi MenÃ¼nÃ¼ SeÃ§
  </button>
  <p style="font-size:.75rem;color:var(--gray-400);max-width:400px;text-align:center">Otomatik plan size Ã¶nerilen yemekleri seÃ§er. Kendi menÃ¼nÃ¼zde bowl sipariÅŸ eder gibi istediÄŸiniz yemekleri tek tek seÃ§ersiniz.</p>
 </div>
</div>

<!-- Results Section -->
<div id="resultsSection">

 <!-- Summary -->
 <div class="summary-banner slide-up" id="summaryBanner">
  <h3>â˜ªï¸ Ramazan GÃ¼nlÃ¼k Beslenme Ã–zeti</h3>
  <div class="summary-stats">
   <div class="stat-item">
    <div class="stat-value" id="totalCal">0</div>
    <div class="stat-label">Kalori</div>
   </div>
   <div class="stat-item">
    <div class="stat-value" id="totalProtein">0g</div>
    <div class="stat-label">Protein</div>
   </div>
   <div class="stat-item">
    <div class="stat-value" id="totalCarb">0g</div>
    <div class="stat-label">Karbonhidrat</div>
   </div>
   <div class="stat-item">
    <div class="stat-value" id="totalFat">0g</div>
    <div class="stat-label">YaÄŸ</div>
   </div>
  </div>
  <div class="macro-bars" style="margin-top:1rem">
   <div class="macro-bar-row">
    <div class="macro-bar-label" style="color:#fbbf24">ğŸŸ  Protein</div>
    <div class="macro-bar-track"><div class="macro-bar-fill protein" id="barProtein" style="width:0%"></div></div>
    <div class="macro-bar-value" id="barProteinVal" style="color:var(--protein)">0%</div>
   </div>
   <div class="macro-bar-row">
    <div class="macro-bar-label" style="color:#f87171">ğŸ”´ YaÄŸ</div>
    <div class="macro-bar-track"><div class="macro-bar-fill fat" id="barFat" style="width:0%"></div></div>
    <div class="macro-bar-value" id="barFatVal" style="color:var(--fat)">0%</div>
   </div>
   <div class="macro-bar-row">
    <div class="macro-bar-label" style="color:#6ee7b7">ğŸŸ¢ Karb.</div>
    <div class="macro-bar-track"><div class="macro-bar-fill carb" id="barCarb" style="width:0%"></div></div>
    <div class="macro-bar-value" id="barCarbVal" style="color:var(--carb)">0%</div>
   </div>
  </div>
 </div>

 <!-- Warning Card -->
 <div class="warning-card" id="warningCard">
  <h3>âš ï¸ SaÄŸlÄ±k UyarÄ±larÄ±</h3>
  <ul class="warning-list" id="warningList"></ul>
 </div>

 <!-- â•â• BOWL BUILDER / MENÃœ â•â• -->
 <div class="menu-builder no-print open" id="menuBuilder">
  <div class="menu-builder-header" onclick="toggleMenuBuilder()">
   <span style="font-size:1.5rem">ğŸ½ï¸</span>
   <h2>MenÃ¼den SeÃ§ â€” Kendi Ã–ÄŸÃ¼nÃ¼nÃ¼ OluÅŸtur</h2>
   <span class="expand-icon">â–¼</span>
  </div>
  <div class="menu-builder-body">
   <div class="menu-builder-content">

    <p class="builder-intro">AÅŸaÄŸÄ±daki menÃ¼den istediÄŸin yemekleri seÃ§erek Ã¶ÄŸÃ¼nlerini oluÅŸtur â€” tÄ±pkÄ± bowl sipariÅŸ eder gibi! ğŸ¥—</p>

    <!-- Meal tabs -->
    <div class="meal-tabs" id="menuMealTabs">
     <button class="meal-tab active" onclick="setMenuMeal('sahur')">ğŸŒ™ Sahur <span class="tab-cal" id="menuSahurCal"></span></button>
     <button class="meal-tab" onclick="setMenuMeal('iftar')">ğŸŒ… Ä°ftar <span class="tab-cal" id="menuIftarCal"></span></button>
     <button class="meal-tab" onclick="setMenuMeal('snack')">ğŸ«– Ara Ã–ÄŸÃ¼n <span class="tab-cal" id="menuSnackCal"></span></button>
    </div>

    <!-- Calorie target progress -->
    <div class="target-progress" id="targetProgress">
     <div class="target-progress-header">
      <span class="target-label" id="targetLabel">ğŸ¯ Hedef: <b id="targetCalLabel">â€”</b> kcal</span>
      <span class="target-current" id="targetCurrent">0 / â€” kcal</span>
     </div>
     <div class="target-bar">
      <div class="target-bar-fill" id="targetBarFill" style="width:0%"></div>
     </div>
    </div>

    <!-- Selected foods basket -->
    <div class="basket" id="menuBasket">
     <div class="basket-title">
      <span>ğŸ“‹ SeÃ§ilen Yemekler</span>
      <span id="basketCount">0 yemek</span>
     </div>
     <div class="basket-items" id="basketItems">
      <span class="basket-empty">AÅŸaÄŸÄ±dan yemek ekleyin...</span>
     </div>
    </div>

    <!-- Running total -->
    <div class="running-total" id="runningTotal">
     <div><span class="rt-cal" id="rtCal">0</span> kcal</div>
     <div class="rt-macros">
      <span>ğŸŸ  P: <b id="rtP">0</b>g</span>
      <span>ğŸŸ¢ K: <b id="rtC">0</b>g</span>
      <span>ğŸ”´ Y: <b id="rtF">0</b>g</span>
     </div>
    </div>

    <!-- Category pills -->
    <div class="cat-pills" id="catPills"></div>

    <!-- Food grid -->
    <div class="menu-grid" id="menuGrid"></div>

    <div style="text-align:center;margin-top:1rem;display:flex;gap:.5rem;justify-content:center;flex-wrap:wrap">
     <button class="btn btn-accent btn-sm" onclick="applyMenuSelections()">âœ… PlanÄ±ma Uygula</button>
     <button class="btn btn-outline btn-sm" onclick="clearMenuSelections()">ğŸ—‘ï¸ Temizle</button>
     <button class="btn btn-outline btn-sm" onclick="clearAllMenuSelections()">ğŸ—‘ï¸ TÃ¼mÃ¼nÃ¼ SÄ±fÄ±rla</button>
    </div>

   </div>
  </div>
 </div>

 <!-- Sahur Meal Card -->
 <div class="meal-card expanded" id="sahurCard">
  <div class="meal-card-header" onclick="toggleMeal('sahurCard')">
   <div class="meal-icon">ğŸŒ™</div>
   <div class="meal-info">
    <div class="meal-title">Sahur Ã–ÄŸÃ¼nÃ¼</div>
    <div class="meal-subtitle">Ä°msak Ã¶ncesi Â· AÄŸÄ±r, tok tutucu</div>
   </div>
   <div class="meal-cal">
    <div class="meal-cal-value" id="sahurCal">0</div>
    <div class="meal-cal-unit">kcal</div>
   </div>
   <span class="expand-icon">â–¼</span>
  </div>
  <div class="meal-card-body">
   <div class="meal-card-content">
    <ul class="food-list" id="sahurFoods"></ul>
    <div class="meal-macro-summary">
     <h4>Sahur Makro DaÄŸÄ±lÄ±mÄ±</h4>
     <div class="mini-macro-bars">
      <div class="mini-macro">
       <div class="bar"><div class="bar-fill" id="sahurProteinBar" style="width:0%;background:var(--protein)"></div></div>
       <div class="val" id="sahurProteinVal" style="color:var(--protein)">0g</div>
       <div class="lbl">Protein</div>
      </div>
      <div class="mini-macro">
       <div class="bar"><div class="bar-fill" id="sahurCarbBar" style="width:0%;background:var(--carb)"></div></div>
       <div class="val" id="sahurCarbVal" style="color:var(--carb)">0g</div>
       <div class="lbl">Karbonhidrat</div>
      </div>
      <div class="mini-macro">
       <div class="bar"><div class="bar-fill" id="sahurFatBar" style="width:0%;background:var(--fat)"></div></div>
       <div class="val" id="sahurFatVal" style="color:var(--fat)">0g</div>
       <div class="lbl">YaÄŸ</div>
      </div>
     </div>
    </div>
   </div>
  </div>
 </div>

 <!-- Iftar Meal Card -->
 <div class="meal-card expanded" id="iftarCard">
  <div class="meal-card-header" onclick="toggleMeal('iftarCard')">
   <div class="meal-icon">ğŸŒ…</div>
   <div class="meal-info">
    <div class="meal-title">Ä°ftar Ã–ÄŸÃ¼nÃ¼</div>
    <div class="meal-subtitle">AkÅŸam Â· Dengeli ve besleyici</div>
   </div>
   <div class="meal-cal">
    <div class="meal-cal-value" id="iftarCal">0</div>
    <div class="meal-cal-unit">kcal</div>
   </div>
   <span class="expand-icon">â–¼</span>
  </div>
  <div class="meal-card-body">
   <div class="meal-card-content">
    <ul class="food-list" id="iftarFoods"></ul>
    <div class="meal-macro-summary">
     <h4>Ä°ftar Makro DaÄŸÄ±lÄ±mÄ±</h4>
     <div class="mini-macro-bars">
      <div class="mini-macro">
       <div class="bar"><div class="bar-fill" id="iftarProteinBar" style="width:0%;background:var(--protein)"></div></div>
       <div class="val" id="iftarProteinVal" style="color:var(--protein)">0g</div>
       <div class="lbl">Protein</div>
      </div>
      <div class="mini-macro">
       <div class="bar"><div class="bar-fill" id="iftarCarbBar" style="width:0%;background:var(--carb)"></div></div>
       <div class="val" id="iftarCarbVal" style="color:var(--carb)">0g</div>
       <div class="lbl">Karbonhidrat</div>
      </div>
      <div class="mini-macro">
       <div class="bar"><div class="bar-fill" id="iftarFatBar" style="width:0%;background:var(--fat)"></div></div>
       <div class="val" id="iftarFatVal" style="color:var(--fat)">0g</div>
       <div class="lbl">YaÄŸ</div>
      </div>
     </div>
    </div>
   </div>
  </div>
 </div>

 <!-- Snack Card (ara Ã¶ÄŸÃ¼n between iftar and sahur) -->
 <div class="meal-card" id="snackCard">
  <div class="meal-card-header" onclick="toggleMeal('snackCard')">
   <div class="meal-icon">ğŸ«–</div>
   <div class="meal-info">
    <div class="meal-title">Ara Ã–ÄŸÃ¼n / Gece AtÄ±ÅŸtÄ±rmasÄ±</div>
    <div class="meal-subtitle">Ä°ftar sonrasÄ± Â· Hafif ve besleyici</div>
   </div>
   <div class="meal-cal">
    <div class="meal-cal-value" id="snackCal">0</div>
    <div class="meal-cal-unit">kcal</div>
   </div>
   <span class="expand-icon">â–¼</span>
  </div>
  <div class="meal-card-body">
   <div class="meal-card-content">
    <ul class="food-list" id="snackFoods"></ul>
    <div class="meal-macro-summary">
     <h4>Ara Ã–ÄŸÃ¼n Makro DaÄŸÄ±lÄ±mÄ±</h4>
     <div class="mini-macro-bars">
      <div class="mini-macro">
       <div class="bar"><div class="bar-fill" id="snackProteinBar" style="width:0%;background:var(--protein)"></div></div>
       <div class="val" id="snackProteinVal" style="color:var(--protein)">0g</div>
       <div class="lbl">Protein</div>
      </div>
      <div class="mini-macro">
       <div class="bar"><div class="bar-fill" id="snackCarbBar" style="width:0%;background:var(--carb)"></div></div>
       <div class="val" id="snackCarbVal" style="color:var(--carb)">0g</div>
       <div class="lbl">Karbonhidrat</div>
      </div>
      <div class="mini-macro">
       <div class="bar"><div class="bar-fill" id="snackFatBar" style="width:0%;background:var(--fat)"></div></div>
       <div class="val" id="snackFatVal" style="color:var(--fat)">0g</div>
       <div class="lbl">YaÄŸ</div>
      </div>
     </div>
    </div>
   </div>
  </div>
 </div>

 <!-- Hydration -->
 <div class="hydration-card slide-up" id="hydrationCard">
  <h3>ğŸ’§ Su ve SÄ±vÄ± TÃ¼ketimi</h3>
  <div class="hydration-grid">
   <div class="hydration-item">
    <div class="h-value" id="waterTotal">0</div>
    <div class="h-label">Litre / gÃ¼n</div>
   </div>
   <div class="hydration-item">
    <div class="h-value" id="waterGlasses">0</div>
    <div class="h-label">Bardak (200ml)</div>
   </div>
  </div>
  <div class="hydration-schedule">
   <div class="hydration-time"><span class="ht-icon">ğŸŒ…</span> <strong>Ä°ftar:</strong>&nbsp; 2 bardak su ile oruÃ§ aÃ§Ä±n</div>
   <div class="hydration-time"><span class="ht-icon">ğŸ½ï¸</span> <strong>Yemek arasÄ±:</strong>&nbsp; Her saat 1 bardak su iÃ§in</div>
   <div class="hydration-time"><span class="ht-icon">ğŸ«–</span> <strong>Gece:</strong>&nbsp; Bitki Ã§ayÄ± veya Ä±lÄ±k su tercih edin</div>
   <div class="hydration-time"><span class="ht-icon">ğŸŒ™</span> <strong>Sahur:</strong>&nbsp; 2 bardak su ile sahuru kapatÄ±n</div>
   <div class="hydration-time"><span class="ht-icon">âš ï¸</span> <strong>Dikkat:</strong>&nbsp; Kafeinli iÃ§eceklerden kaÃ§Ä±nÄ±n â€” susuzluÄŸu artÄ±rÄ±r</div>
  </div>
 </div>

 <!-- Timing Tips -->
 <div class="tips-card slide-up" id="tipsCard">
  <h3>â° Zamanlama Ä°puÃ§larÄ±</h3>
  <ul class="tips-list">
   <li>Ä°ftarÄ± hurma ve su ile aÃ§Ä±n â€” kan ÅŸekerinizi hÄ±zla dengeler.</li>
   <li>Ä°ftar yemeÄŸini 2-3 aÅŸamada yiyin: Ã¶nce Ã§orba, 15 dk ara, sonra ana yemek.</li>
   <li>Sahurda aÄŸÄ±r yaÄŸlÄ± yemeklerden kaÃ§Ä±nÄ±n â€” tok tutar ama susatÄ±r.</li>
   <li>Sahuru imsak vaktinden 30-45 dakika Ã¶nce bitirin.</li>
   <li>Ä°ftar sonrasÄ± 1.5 saat geÃ§meden uyumayÄ±n â€” reflÃ¼ riskini azaltÄ±r.</li>
   <li>Protein aÄŸÄ±rlÄ±klÄ± sahur gÃ¼n boyunca tok hissetmenize yardÄ±mcÄ± olur.</li>
   <li>Lif aÃ§Ä±sÄ±ndan zengin besinler (yulaf, tam tahÄ±l) uzun sÃ¼re enerji saÄŸlar.</li>
   <li>Sahurda tuzlu besinlerden kaÃ§Ä±nÄ±n â€” gÃ¼n boyunca susuzluÄŸu artÄ±rÄ±r.</li>
  </ul>
 </div>

 <!-- Shopping List -->
 <div class="shopping-card" id="shoppingCard">
  <div class="shopping-card-header" onclick="toggleShopping()">
   <span style="font-size:1.5rem">ğŸ›’</span>
   <h2>AlÄ±ÅŸveriÅŸ Listesi</h2>
   <span class="expand-icon">â–¼</span>
  </div>
  <div class="shopping-card-body">
   <div class="shopping-card-content">

    <!-- Day selector -->
    <div class="shopping-day-tabs" id="shoppingDayTabs">
     <button class="shopping-day-tab active" onclick="setShoppingDays(1)">1 GÃ¼nlÃ¼k</button>
     <button class="shopping-day-tab" onclick="setShoppingDays(3)">3 GÃ¼nlÃ¼k</button>
     <button class="shopping-day-tab" onclick="setShoppingDays(7)">HaftalÄ±k</button>
    </div>

    <!-- Summary -->
    <div class="shopping-summary" id="shoppingSummary">
     <span class="ss-total" id="shoppingTotal">0 Ã¼rÃ¼n</span>
     <span class="ss-checked" id="shoppingChecked">0 alÄ±ndÄ±</span>
    </div>

    <!-- Items by category -->
    <div id="shoppingList"></div>

    <!-- Actions -->
    <div class="shopping-actions no-print">
     <button class="btn btn-outline btn-sm" onclick="copyShoppingList()">ğŸ“‹ Kopyala</button>
     <button class="btn btn-outline btn-sm" onclick="shareShoppingList()">ğŸ“¤ PaylaÅŸ</button>
     <button class="btn btn-outline btn-sm" onclick="resetShoppingChecks()">â†©ï¸ Ä°ÅŸaretleri SÄ±fÄ±rla</button>
    </div>

   </div>
  </div>
 </div>

 <!-- Action buttons -->
 <div class="action-bar no-print">
  <button class="btn btn-accent" onclick="regeneratePlan()">ğŸ”„ Yeni Plan OluÅŸtur</button>
  <button class="btn btn-outline" onclick="window.print()">ğŸ–¨ï¸ YazdÄ±r</button>
  <button class="btn btn-outline" onclick="sharePlan()">ğŸ“¤ PaylaÅŸ</button>
  <button class="btn btn-outline btn-sm" onclick="editInputs()">âœï¸ Bilgileri DÃ¼zenle</button>
 </div>

</div><!-- /resultsSection -->

</div><!-- /main-wrap -->

<footer class="site-footer">
 <p>Â© 2025 UzunYaÅŸa â€” SaÄŸlÄ±klÄ± yaÅŸam rehberiniz</p>
 <p style="margin-top:.25rem;font-size:.7rem;opacity:.7">Bu araÃ§ bilgilendirme amaÃ§lÄ±dÄ±r. SaÄŸlÄ±k durumunuzla ilgili kararlarÄ± mutlaka doktorunuzla paylaÅŸÄ±n.</p>
 <p style="margin-top:.5rem"><a href="/pages/gizlilik-politikasi.html">Gizlilik</a> Â· <a href="/pages/kullanim-sartlari.html">KullanÄ±m ÅartlarÄ±</a> Â· <a href="/pages/hakkimizda.html">HakkÄ±mÄ±zda</a></p>
</footer>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TURKISH FOOD DATABASE â€” 50+ items with macros
// Format: { name, icon, category, cal, protein, carb, fat, portion, portionG, meal[] }
// All values per portionG grams
// meal: s=sahur, i=iftar, a=snack (ara Ã¶ÄŸÃ¼n)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const FOODS = [
  // â•â• PROTEÄ°N / ET & YUMURTA (20) â•â•
  {name:"HaÅŸlanmÄ±ÅŸ Yumurta",icon:"ğŸ¥š",cat:"protein",cal:155,p:13,c:1.1,f:11,portion:"2 adet",pg:100,meal:["s","i"]},
  {name:"Menemen",icon:"ğŸ³",cat:"protein",cal:130,p:8,c:6,f:9,portion:"1 porsiyon (200g)",pg:200,meal:["s"]},
  {name:"Sahanda Yumurta",icon:"ğŸ³",cat:"protein",cal:196,p:14,c:1,f:15,portion:"2 adet",pg:100,meal:["s"]},
  {name:"Omlet (Sebzeli)",icon:"ğŸ³",cat:"protein",cal:154,p:11,c:3,f:11,portion:"2 yumurta",pg:120,meal:["s"]},
  {name:"Ã‡Ä±lbÄ±r",icon:"ğŸ¥š",cat:"protein",cal:180,p:12,c:4,f:13,portion:"2 yumurta",pg:150,meal:["s"]},
  {name:"Sucuklu Yumurta",icon:"ğŸ³",cat:"protein",cal:240,p:14,c:2,f:19,portion:"1 porsiyon",pg:120,meal:["s"]},
  {name:"Izgara Tavuk GÃ¶ÄŸsÃ¼",icon:"ğŸ—",cat:"protein",cal:165,p:31,c:0,f:3.6,portion:"150g",pg:150,meal:["i","s"]},
  {name:"Izgara KÃ¶fte",icon:"ğŸ¥©",cat:"protein",cal:250,p:17,c:3,f:19,portion:"4 adet (120g)",pg:120,meal:["i"]},
  {name:"FÄ±rÄ±nda Tavuk But",icon:"ğŸ—",cat:"protein",cal:209,p:26,c:0,f:11,portion:"1 adet (150g)",pg:150,meal:["i"]},
  {name:"HaÅŸlanmÄ±ÅŸ Tavuk",icon:"ğŸ”",cat:"protein",cal:165,p:31,c:0,f:3.6,portion:"150g",pg:150,meal:["s","i"]},
  {name:"BalÄ±k (Levrek Izgara)",icon:"ğŸŸ",cat:"protein",cal:124,p:24,c:0,f:2.6,portion:"150g",pg:150,meal:["i"]},
  {name:"Somon Izgara",icon:"ğŸŸ",cat:"protein",cal:208,p:20,c:0,f:13,portion:"150g",pg:150,meal:["i"]},
  {name:"FÄ±rÄ±nda BalÄ±k",icon:"ğŸŸ",cat:"protein",cal:130,p:22,c:2,f:4,portion:"150g",pg:150,meal:["i"]},
  {name:"Kuru Fasulye",icon:"ğŸ«˜",cat:"protein",cal:120,p:8,c:15,f:3,portion:"1 kase (200g)",pg:200,meal:["i"]},
  {name:"Nohut YemeÄŸi",icon:"ğŸŸ¡",cat:"protein",cal:135,p:7,c:18,f:4,portion:"1 kase (200g)",pg:200,meal:["i"]},
  {name:"Etli Bamya",icon:"ğŸ¥˜",cat:"protein",cal:95,p:6,c:8,f:5,portion:"1 kase (200g)",pg:200,meal:["i"]},
  {name:"Mercimek KÃ¶ftesi",icon:"ğŸŸ¤",cat:"protein",cal:165,p:7,c:25,f:4,portion:"4 adet (100g)",pg:100,meal:["i","a"]},
  {name:"Tavuklu Pilav",icon:"ğŸš",cat:"protein",cal:180,p:12,c:24,f:4,portion:"1 porsiyon (250g)",pg:250,meal:["i"]},
  {name:"Etli TÃ¼rlÃ¼",icon:"ğŸ¥˜",cat:"protein",cal:110,p:7,c:10,f:5,portion:"1 kase (200g)",pg:200,meal:["i"]},
  {name:"Dana Kavurma",icon:"ğŸ¥©",cat:"protein",cal:215,p:20,c:1,f:14,portion:"1 porsiyon (120g)",pg:120,meal:["i"]},
  {name:"Tas KebabÄ±",icon:"ğŸ¥˜",cat:"protein",cal:195,p:18,c:6,f:11,portion:"1 porsiyon (200g)",pg:200,meal:["i"]},
  {name:"Adana Kebap",icon:"ğŸ¥©",cat:"protein",cal:265,p:16,c:2,f:21,portion:"2 ÅŸiÅŸ (120g)",pg:120,meal:["i"]},
  {name:"Urfa Kebap",icon:"ğŸ¥©",cat:"protein",cal:245,p:15,c:2,f:19,portion:"2 ÅŸiÅŸ (120g)",pg:120,meal:["i"]},
  {name:"Tavuk ÅiÅŸ",icon:"ğŸ—",cat:"protein",cal:170,p:28,c:2,f:5,portion:"2 ÅŸiÅŸ (150g)",pg:150,meal:["i"]},
  {name:"HÃ¼nkar BeÄŸendi",icon:"ğŸ¥˜",cat:"protein",cal:185,p:14,c:10,f:10,portion:"1 porsiyon (250g)",pg:250,meal:["i"]},
  {name:"Etli Bezelye",icon:"ğŸ¥˜",cat:"protein",cal:105,p:7,c:9,f:4,portion:"1 kase (200g)",pg:200,meal:["i"]},
  {name:"Etli Kereviz",icon:"ğŸ¥˜",cat:"protein",cal:100,p:6,c:8,f:5,portion:"1 kase (200g)",pg:200,meal:["i"]},
  {name:"Ã‡erkez TavuÄŸu",icon:"ğŸ”",cat:"protein",cal:190,p:16,c:5,f:12,portion:"1 porsiyon (150g)",pg:150,meal:["i","a"]},
  {name:"Ton BalÄ±klÄ± Salata",icon:"ğŸŸ",cat:"protein",cal:140,p:20,c:4,f:5,portion:"1 porsiyon (150g)",pg:150,meal:["s","i"]},

  // â•â• TAHILlar / KARBONHIDRAT (15) â•â•
  {name:"Tam BuÄŸday EkmeÄŸi",icon:"ğŸ",cat:"carb",cal:247,p:13,c:41,f:3.4,portion:"2 dilim (80g)",pg:80,meal:["s","i"]},
  {name:"Yulaf Ezmesi",icon:"ğŸ¥£",cat:"carb",cal:389,p:17,c:66,f:7,portion:"50g (sÃ¼tle)",pg:50,meal:["s"]},
  {name:"Yulaf Pankek",icon:"ğŸ¥",cat:"carb",cal:170,p:8,c:22,f:6,portion:"2 adet (100g)",pg:100,meal:["s"]},
  {name:"Bulgur PilavÄ±",icon:"ğŸŒ¾",cat:"carb",cal:110,p:4,c:19,f:2,portion:"1 porsiyon (150g)",pg:150,meal:["i","s"]},
  {name:"PirinÃ§ PilavÄ±",icon:"ğŸš",cat:"carb",cal:130,p:2.7,c:28,f:0.3,portion:"1 porsiyon (150g)",pg:150,meal:["i"]},
  {name:"Ramazan Pidesi",icon:"ğŸ«“",cat:"carb",cal:275,p:9,c:50,f:3,portion:"1/4 pide (80g)",pg:80,meal:["i"]},
  {name:"Simit",icon:"ğŸ¥¯",cat:"carb",cal:310,p:10,c:57,f:5,portion:"1 adet (120g)",pg:120,meal:["s"]},
  {name:"GÃ¶zleme (Peynirli)",icon:"ğŸ«“",cat:"carb",cal:220,p:9,c:28,f:8,portion:"1 dilim (120g)",pg:120,meal:["s"]},
  {name:"GÃ¶zleme (IspanaklÄ±)",icon:"ğŸ«“",cat:"carb",cal:195,p:7,c:26,f:7,portion:"1 dilim (120g)",pg:120,meal:["s"]},
  {name:"Makarna (Tam BuÄŸday)",icon:"ğŸ",cat:"carb",cal:124,p:5,c:25,f:0.5,portion:"1 porsiyon (180g)",pg:180,meal:["i"]},
  {name:"MantÄ±",icon:"ğŸ¥Ÿ",cat:"carb",cal:180,p:8,c:22,f:7,portion:"1 porsiyon (200g)",pg:200,meal:["i"]},
  {name:"Ã‡iÄŸ BÃ¶rek",icon:"ğŸ¥Ÿ",cat:"carb",cal:260,p:10,c:28,f:12,portion:"2 adet (120g)",pg:120,meal:["i"]},
  {name:"Su BÃ¶reÄŸi",icon:"ğŸ«“",cat:"carb",cal:230,p:8,c:25,f:11,portion:"1 dilim (120g)",pg:120,meal:["s","i"]},
  {name:"Patatesli BÃ¶rek",icon:"ğŸ«“",cat:"carb",cal:245,p:6,c:30,f:11,portion:"1 dilim (120g)",pg:120,meal:["s"]},
  {name:"Bazlama",icon:"ğŸ«“",cat:"carb",cal:260,p:8,c:48,f:3,portion:"1/2 adet (80g)",pg:80,meal:["s","i"]},
  {name:"Lahmacun",icon:"ğŸ«“",cat:"carb",cal:210,p:8,c:28,f:8,portion:"1 adet (100g)",pg:100,meal:["i"]},
  {name:"Pide (KÄ±ymalÄ±)",icon:"ğŸ«“",cat:"carb",cal:240,p:10,c:30,f:9,portion:"1 dilim (120g)",pg:120,meal:["i"]},
  {name:"Ã‡iÄŸ KÃ¶fteli DÃ¼rÃ¼m",icon:"ğŸŒ¯",cat:"carb",cal:200,p:6,c:28,f:7,portion:"1 adet (120g)",pg:120,meal:["i"]},
  {name:"LavaÅŸ",icon:"ğŸ«“",cat:"carb",cal:240,p:8,c:47,f:2,portion:"1 adet (80g)",pg:80,meal:["s","i"]},
  {name:"Tam TahÄ±llÄ± Kraker",icon:"ğŸ˜",cat:"carb",cal:440,p:10,c:65,f:16,portion:"6 adet (40g)",pg:40,meal:["s","a"]},
  {name:"Nohutlu PirinÃ§ PilavÄ±",icon:"ğŸš",cat:"carb",cal:145,p:5,c:24,f:3,portion:"1 porsiyon (150g)",pg:150,meal:["i"]},
  {name:"KarabuÄŸday PilavÄ±",icon:"ğŸŒ¾",cat:"carb",cal:92,p:3.4,c:20,f:0.6,portion:"1 porsiyon (150g)",pg:150,meal:["i","s"]},
  {name:"Patates PÃ¼resi",icon:"ğŸ¥”",cat:"carb",cal:83,p:2,c:15,f:1.5,portion:"1 porsiyon (150g)",pg:150,meal:["i"]},
  {name:"FÄ±rÄ±nda Patates",icon:"ğŸ¥”",cat:"carb",cal:93,p:2.5,c:21,f:0.1,portion:"1 orta boy (200g)",pg:200,meal:["i","s"]},

  // â•â• Ã‡ORBALAR (12) â•â•
  {name:"Mercimek Ã‡orbasÄ±",icon:"ğŸ²",cat:"soup",cal:85,p:5,c:12,f:2,portion:"1 kase (250ml)",pg:250,meal:["i","s"]},
  {name:"Ezogelin Ã‡orbasÄ±",icon:"ğŸ²",cat:"soup",cal:80,p:4,c:13,f:1.5,portion:"1 kase (250ml)",pg:250,meal:["i","s"]},
  {name:"Tarhana Ã‡orbasÄ±",icon:"ğŸ²",cat:"soup",cal:75,p:3,c:12,f:2,portion:"1 kase (250ml)",pg:250,meal:["i","s"]},
  {name:"Yayla Ã‡orbasÄ±",icon:"ğŸ²",cat:"soup",cal:65,p:3,c:7,f:3,portion:"1 kase (250ml)",pg:250,meal:["i","s"]},
  {name:"Kemik Suyu",icon:"ğŸ¥£",cat:"soup",cal:40,p:5,c:2,f:1.5,portion:"1 kase (250ml)",pg:250,meal:["s","i"]},
  {name:"Ä°ÅŸkembe Ã‡orbasÄ±",icon:"ğŸ²",cat:"soup",cal:52,p:7,c:3,f:2,portion:"1 kase (250ml)",pg:250,meal:["s"]},
  {name:"Tavuk Suyu Ã‡orbasÄ±",icon:"ğŸ²",cat:"soup",cal:55,p:4,c:5,f:2,portion:"1 kase (250ml)",pg:250,meal:["i","s"]},
  {name:"Domates Ã‡orbasÄ±",icon:"ğŸ²",cat:"soup",cal:60,p:2,c:10,f:1.5,portion:"1 kase (250ml)",pg:250,meal:["i","s"]},
  {name:"Sebze Ã‡orbasÄ±",icon:"ğŸ²",cat:"soup",cal:55,p:2,c:8,f:1.5,portion:"1 kase (250ml)",pg:250,meal:["i","s"]},
  {name:"DÃ¼ÄŸÃ¼n Ã‡orbasÄ±",icon:"ğŸ²",cat:"soup",cal:90,p:5,c:8,f:4,portion:"1 kase (250ml)",pg:250,meal:["i"]},
  {name:"Åehriyeli Tavuk Ã‡orbasÄ±",icon:"ğŸ²",cat:"soup",cal:70,p:5,c:9,f:2,portion:"1 kase (250ml)",pg:250,meal:["i","s"]},
  {name:"Mantar Ã‡orbasÄ±",icon:"ğŸ²",cat:"soup",cal:75,p:3,c:7,f:4,portion:"1 kase (250ml)",pg:250,meal:["i"]},
  {name:"Toyga Ã‡orbasÄ±",icon:"ğŸ²",cat:"soup",cal:70,p:3.5,c:8,f:3,portion:"1 kase (250ml)",pg:250,meal:["i","s"]},
  {name:"SÃ¼leymaniye Ã‡orbasÄ±",icon:"ğŸ²",cat:"soup",cal:85,p:4,c:10,f:3.5,portion:"1 kase (250ml)",pg:250,meal:["i"]},
  {name:"Kelle PaÃ§a Ã‡orbasÄ±",icon:"ğŸ²",cat:"soup",cal:60,p:8,c:2,f:2.5,portion:"1 kase (250ml)",pg:250,meal:["s"]},
  {name:"YoÄŸurtlu BuÄŸday Ã‡orbasÄ±",icon:"ğŸ²",cat:"soup",cal:80,p:3,c:13,f:2,portion:"1 kase (250ml)",pg:250,meal:["i","s"]},
  {name:"HavuÃ§ Ã‡orbasÄ±",icon:"ğŸ²",cat:"soup",cal:50,p:1.5,c:9,f:1,portion:"1 kase (250ml)",pg:250,meal:["i"]},
  {name:"Brokoli Ã‡orbasÄ±",icon:"ğŸ²",cat:"soup",cal:55,p:3,c:6,f:2,portion:"1 kase (250ml)",pg:250,meal:["i"]},
  {name:"BalkabaÄŸÄ± Ã‡orbasÄ±",icon:"ğŸ²",cat:"soup",cal:60,p:1.5,c:10,f:1.5,portion:"1 kase (250ml)",pg:250,meal:["i"]},
  {name:"PaÃ§a Ã‡orbasÄ±",icon:"ğŸ²",cat:"soup",cal:55,p:6,c:2,f:2.5,portion:"1 kase (250ml)",pg:250,meal:["s"]},
  {name:"ArabaÅŸÄ± Ã‡orbasÄ±",icon:"ğŸ²",cat:"soup",cal:75,p:4,c:9,f:3,portion:"1 kase (250ml)",pg:250,meal:["i","s"]},

  // â•â• SÃœT ÃœRÃœNLERÄ° (12) â•â•
  {name:"SÃ¼zme YoÄŸurt",icon:"ğŸ¥›",cat:"dairy",cal:66,p:10,c:3.6,f:0.7,portion:"1 kase (150g)",pg:150,meal:["s","i"]},
  {name:"Beyaz Peynir",icon:"ğŸ§€",cat:"dairy",cal:264,p:17,c:1,f:21,portion:"50g",pg:50,meal:["s"]},
  {name:"KaÅŸar Peyniri",icon:"ğŸ§€",cat:"dairy",cal:350,p:25,c:1,f:28,portion:"40g",pg:40,meal:["s"]},
  {name:"Lor Peyniri",icon:"ğŸ§€",cat:"dairy",cal:98,p:11,c:3,f:4,portion:"80g",pg:80,meal:["s"]},
  {name:"Tulum Peyniri",icon:"ğŸ§€",cat:"dairy",cal:300,p:19,c:1,f:24,portion:"40g",pg:40,meal:["s"]},
  {name:"Ã‡Ã¶kelek",icon:"ğŸ§€",cat:"dairy",cal:72,p:12,c:2,f:1.5,portion:"80g",pg:80,meal:["s"]},
  {name:"Hellim Peyniri (Izgara)",icon:"ğŸ§€",cat:"dairy",cal:321,p:21,c:2,f:25,portion:"60g",pg:60,meal:["s","i"]},
  {name:"Ayran",icon:"ğŸ¥›",cat:"dairy",cal:40,p:2,c:3,f:2,portion:"1 bardak (200ml)",pg:200,meal:["i","s"]},
  {name:"Kefir",icon:"ğŸ¥›",cat:"dairy",cal:60,p:3.3,c:4,f:3.5,portion:"1 bardak (200ml)",pg:200,meal:["s","a"]},
  {name:"CacÄ±k",icon:"ğŸ¥’",cat:"dairy",cal:55,p:2.5,c:3,f:3.5,portion:"1 kase (200g)",pg:200,meal:["i","s"]},
  {name:"Labne",icon:"ğŸ§€",cat:"dairy",cal:130,p:6,c:4,f:10,portion:"60g",pg:60,meal:["s","a"]},
  {name:"SÃ¼t (YarÄ±m YaÄŸlÄ±)",icon:"ğŸ¥›",cat:"dairy",cal:50,p:3.3,c:5,f:1.5,portion:"1 bardak (200ml)",pg:200,meal:["s","a"]},
  {name:"Ã‡eÃ§il Peyniri",icon:"ğŸ§€",cat:"dairy",cal:315,p:28,c:1,f:22,portion:"40g",pg:40,meal:["s"]},
  {name:"Otlu Peynir",icon:"ğŸ§€",cat:"dairy",cal:250,p:16,c:1.5,f:20,portion:"50g",pg:50,meal:["s"]},
  {name:"Ã–rgÃ¼ Peyniri",icon:"ğŸ§€",cat:"dairy",cal:310,p:23,c:2,f:23,portion:"40g",pg:40,meal:["s","a"]},
  {name:"Mozzarella",icon:"ğŸ§€",cat:"dairy",cal:280,p:22,c:2.2,f:17,portion:"60g",pg:60,meal:["s","i"]},
  {name:"YoÄŸurt (Ev YapÄ±mÄ±)",icon:"ğŸ¥›",cat:"dairy",cal:63,p:5,c:4.7,f:3.3,portion:"1 kase (200g)",pg:200,meal:["s","i"]},
  {name:"Quark Peynir",icon:"ğŸ§€",cat:"dairy",cal:67,p:12,c:4,f:0.2,portion:"100g",pg:100,meal:["s","a"]},
  {name:"Protein YoÄŸurt",icon:"ğŸ¥›",cat:"dairy",cal:75,p:12,c:6,f:0.5,portion:"1 kase (150g)",pg:150,meal:["s","a"]},
  {name:"Peynirli SandviÃ§",icon:"ğŸ¥ª",cat:"dairy",cal:210,p:10,c:22,f:9,portion:"1 adet (100g)",pg:100,meal:["s"]},
  {name:"Peynirli PoÄŸaÃ§a",icon:"ğŸ¥",cat:"dairy",cal:280,p:7,c:30,f:15,portion:"1 adet (80g)",pg:80,meal:["s"]},

  // â•â• SEBZE & SALATA (15) â•â•
  {name:"Ã‡oban SalatasÄ±",icon:"ğŸ¥—",cat:"veg",cal:45,p:1,c:4,f:3,portion:"1 porsiyon (200g)",pg:200,meal:["i","s"]},
  {name:"YeÅŸil Salata",icon:"ğŸ¥—",cat:"veg",cal:25,p:1.5,c:3,f:0.5,portion:"1 porsiyon (150g)",pg:150,meal:["i","s"]},
  {name:"Roka-Parmezan SalatasÄ±",icon:"ğŸ¥—",cat:"veg",cal:85,p:4,c:3,f:6,portion:"1 porsiyon (150g)",pg:150,meal:["i"]},
  {name:"ZeytinyaÄŸlÄ± Fasulye",icon:"ğŸ¥¬",cat:"veg",cal:75,p:2,c:8,f:4,portion:"1 kase (200g)",pg:200,meal:["i"]},
  {name:"ZeytinyaÄŸlÄ± Enginar",icon:"ğŸ¥¬",cat:"veg",cal:65,p:2,c:8,f:3,portion:"1 kase (200g)",pg:200,meal:["i"]},
  {name:"ZeytinyaÄŸlÄ± Yaprak Sarma",icon:"ğŸ¥¬",cat:"veg",cal:95,p:2,c:12,f:5,portion:"5 adet (100g)",pg:100,meal:["i","a"]},
  {name:"Ispanak YemeÄŸi",icon:"ğŸ¥¬",cat:"veg",cal:70,p:3,c:4,f:5,portion:"1 kase (200g)",pg:200,meal:["i"]},
  {name:"PatlÄ±can Musakka",icon:"ğŸ†",cat:"veg",cal:155,p:5,c:10,f:11,portion:"1 porsiyon (200g)",pg:200,meal:["i"]},
  {name:"Ä°mam BayÄ±ldÄ±",icon:"ğŸ†",cat:"veg",cal:90,p:2,c:8,f:6,portion:"1 porsiyon (200g)",pg:200,meal:["i"]},
  {name:"Kabak MÃ¼cver",icon:"ğŸ¥’",cat:"veg",cal:140,p:5,c:12,f:8,portion:"3 adet (120g)",pg:120,meal:["s","a","i"]},
  {name:"Humus",icon:"ğŸŸ¤",cat:"veg",cal:175,p:8,c:14,f:10,portion:"4 yemek kaÅŸÄ±ÄŸÄ± (100g)",pg:100,meal:["i","a","s"]},
  {name:"KÄ±sÄ±r",icon:"ğŸ¥—",cat:"veg",cal:140,p:4,c:20,f:5,portion:"1 porsiyon (150g)",pg:150,meal:["i","a"]},
  {name:"Piyaz",icon:"ğŸ¥—",cat:"veg",cal:110,p:5,c:14,f:4,portion:"1 porsiyon (200g)",pg:200,meal:["i"]},
  {name:"KarÄ±ÅŸÄ±k TurÅŸu",icon:"ğŸ¥’",cat:"veg",cal:15,p:0.5,c:3,f:0.1,portion:"5-6 parÃ§a (80g)",pg:80,meal:["i","s"]},
  {name:"Zeytin (YeÅŸil/Siyah)",icon:"ğŸ«’",cat:"veg",cal:145,p:1,c:4,f:15,portion:"10 adet (40g)",pg:40,meal:["s"]},
  {name:"Karnabahar Graten",icon:"ğŸ¥¦",cat:"veg",cal:95,p:5,c:6,f:6,portion:"1 porsiyon (200g)",pg:200,meal:["i"]},
  {name:"Brokoli Sote",icon:"ğŸ¥¦",cat:"veg",cal:55,p:3.7,c:5,f:2.5,portion:"1 porsiyon (200g)",pg:200,meal:["i","s"]},
  {name:"Semizotu YemeÄŸi",icon:"ğŸ¥¬",cat:"veg",cal:45,p:2,c:3,f:3,portion:"1 kase (200g)",pg:200,meal:["i"]},
  {name:"Biber DolmasÄ±",icon:"ğŸ«‘",cat:"veg",cal:130,p:4,c:16,f:6,portion:"2 adet (200g)",pg:200,meal:["i"]},
  {name:"Domates DolmasÄ±",icon:"ğŸ…",cat:"veg",cal:120,p:3,c:15,f:5,portion:"2 adet (200g)",pg:200,meal:["i"]},
  {name:"ZeytinyaÄŸlÄ± Barbunya",icon:"ğŸ«˜",cat:"veg",cal:85,p:4,c:11,f:3,portion:"1 kase (200g)",pg:200,meal:["i"]},
  {name:"KÃ¶zlenmiÅŸ Biber SalatasÄ±",icon:"ğŸ«‘",cat:"veg",cal:35,p:1,c:5,f:1.5,portion:"1 porsiyon (150g)",pg:150,meal:["i","s"]},
  {name:"GavurdaÄŸÄ± SalatasÄ±",icon:"ğŸ¥—",cat:"veg",cal:90,p:2,c:8,f:6,portion:"1 porsiyon (200g)",pg:200,meal:["i"]},
  {name:"Atom SalatasÄ±",icon:"ğŸ¥—",cat:"veg",cal:65,p:2,c:5,f:4,portion:"1 porsiyon (200g)",pg:200,meal:["i","s"]},

  // â•â• MEYVELER (12) â•â•
  {name:"Hurma",icon:"ğŸŒ´",cat:"fruit",cal:282,p:2.5,c:75,f:0.4,portion:"3 adet (30g)",pg:30,meal:["i"]},
  {name:"Muz",icon:"ğŸŒ",cat:"fruit",cal:89,p:1.1,c:23,f:0.3,portion:"1 adet (120g)",pg:120,meal:["s","a","i"]},
  {name:"Elma",icon:"ğŸ",cat:"fruit",cal:52,p:0.3,c:14,f:0.2,portion:"1 adet (180g)",pg:180,meal:["a","s"]},
  {name:"Portakal",icon:"ğŸŠ",cat:"fruit",cal:47,p:0.9,c:12,f:0.1,portion:"1 adet (180g)",pg:180,meal:["a","i"]},
  {name:"Ä°ncir (Taze)",icon:"ğŸ«",cat:"fruit",cal:74,p:0.8,c:19,f:0.3,portion:"3 adet (120g)",pg:120,meal:["a","i"]},
  {name:"ÃœzÃ¼m",icon:"ğŸ‡",cat:"fruit",cal:69,p:0.7,c:18,f:0.2,portion:"1 salkÄ±m (150g)",pg:150,meal:["a","i"]},
  {name:"Karpuz",icon:"ğŸ‰",cat:"fruit",cal:30,p:0.6,c:8,f:0.2,portion:"2 dilim (250g)",pg:250,meal:["i","a"]},
  {name:"Ã‡ilek",icon:"ğŸ“",cat:"fruit",cal:32,p:0.7,c:8,f:0.3,portion:"10 adet (150g)",pg:150,meal:["a","s"]},
  {name:"Nar",icon:"ğŸ«",cat:"fruit",cal:83,p:1.7,c:19,f:1.2,portion:"1/2 adet (100g)",pg:100,meal:["a","i"]},
  {name:"Armut",icon:"ğŸ",cat:"fruit",cal:57,p:0.4,c:15,f:0.1,portion:"1 adet (180g)",pg:180,meal:["a","s"]},
  {name:"KayÄ±sÄ±",icon:"ğŸŸ ",cat:"fruit",cal:48,p:1.4,c:11,f:0.4,portion:"3 adet (120g)",pg:120,meal:["a","i"]},
  {name:"Avokado",icon:"ğŸ¥‘",cat:"fruit",cal:160,p:2,c:9,f:15,portion:"1/2 adet (80g)",pg:80,meal:["s","a"]},
  {name:"Åeftali",icon:"ğŸ‘",cat:"fruit",cal:39,p:0.9,c:10,f:0.3,portion:"1 adet (150g)",pg:150,meal:["a","i"]},
  {name:"Erik",icon:"ğŸ«",cat:"fruit",cal:46,p:0.7,c:11,f:0.3,portion:"3 adet (120g)",pg:120,meal:["a"]},
  {name:"Kiraz",icon:"ğŸ’",cat:"fruit",cal:50,p:1,c:12,f:0.3,portion:"15 adet (100g)",pg:100,meal:["a","i"]},
  {name:"Mandalina",icon:"ğŸŠ",cat:"fruit",cal:53,p:0.8,c:13,f:0.3,portion:"2 adet (150g)",pg:150,meal:["a","s"]},
  {name:"Greyfurt",icon:"ğŸŠ",cat:"fruit",cal:42,p:0.8,c:11,f:0.1,portion:"1/2 adet (150g)",pg:150,meal:["a","s"]},
  {name:"Kavun",icon:"ğŸˆ",cat:"fruit",cal:34,p:0.8,c:8,f:0.2,portion:"2 dilim (200g)",pg:200,meal:["i","a"]},
  {name:"Meyve SalatasÄ±",icon:"ğŸ‡",cat:"fruit",cal:50,p:0.5,c:13,f:0.2,portion:"1 kase (200g)",pg:200,meal:["a","i"]},
  {name:"Smoothie (Muzlu)",icon:"ğŸ¥¤",cat:"fruit",cal:90,p:2,c:19,f:1,portion:"1 bardak (250ml)",pg:250,meal:["s","a"]},
  {name:"Kuru Erik",icon:"ğŸŸ¤",cat:"fruit",cal:240,p:2.2,c:64,f:0.4,portion:"5 adet (40g)",pg:40,meal:["s","a"]},

  // â•â• KURUYEMÄ°Å & ATISTIRMALIK (10) â•â•
  {name:"Badem",icon:"ğŸŒ°",cat:"nut",cal:579,p:21,c:22,f:50,portion:"1 avuÃ§ (30g)",pg:30,meal:["s","a"]},
  {name:"Ceviz",icon:"ğŸ¥œ",cat:"nut",cal:654,p:15,c:14,f:65,portion:"1 avuÃ§ (30g)",pg:30,meal:["s","a"]},
  {name:"FÄ±ndÄ±k",icon:"ğŸŒ°",cat:"nut",cal:628,p:15,c:17,f:61,portion:"1 avuÃ§ (30g)",pg:30,meal:["s","a"]},
  {name:"Antep FÄ±stÄ±ÄŸÄ±",icon:"ğŸŒ°",cat:"nut",cal:560,p:20,c:28,f:45,portion:"1 avuÃ§ (30g)",pg:30,meal:["s","a"]},
  {name:"Kaju",icon:"ğŸŒ°",cat:"nut",cal:553,p:18,c:30,f:44,portion:"1 avuÃ§ (30g)",pg:30,meal:["a"]},
  {name:"Kuru KayÄ±sÄ±",icon:"ğŸŸ ",cat:"nut",cal:241,p:3.4,c:63,f:0.5,portion:"5 adet (40g)",pg:40,meal:["s","a"]},
  {name:"Kuru Ä°ncir",icon:"ğŸŸ¤",cat:"nut",cal:249,p:3.3,c:64,f:0.9,portion:"3 adet (40g)",pg:40,meal:["s","a"]},
  {name:"Kuru ÃœzÃ¼m",icon:"ğŸŸ¤",cat:"nut",cal:299,p:3.1,c:79,f:0.5,portion:"1 avuÃ§ (30g)",pg:30,meal:["s","a"]},
  {name:"Tahin-Pekmez",icon:"ğŸ¯",cat:"nut",cal:290,p:5,c:40,f:13,portion:"2 yemek kaÅŸÄ±ÄŸÄ± (40g)",pg:40,meal:["s","a"]},
  {name:"Hurma-FÄ±stÄ±k Ezmesi",icon:"ğŸŒ´",cat:"nut",cal:310,p:6,c:45,f:12,portion:"2 yemek kaÅŸÄ±ÄŸÄ± (40g)",pg:40,meal:["s","a"]},
  {name:"Ay Ã‡ekirdeÄŸi",icon:"ğŸŒ»",cat:"nut",cal:584,p:21,c:20,f:51,portion:"1 avuÃ§ (30g)",pg:30,meal:["a"]},
  {name:"Chia Tohumu",icon:"ğŸŒ±",cat:"nut",cal:486,p:17,c:42,f:31,portion:"2 yemek kaÅŸÄ±ÄŸÄ± (20g)",pg:20,meal:["s","a"]},
  {name:"Keten Tohumu",icon:"ğŸŒ±",cat:"nut",cal:534,p:18,c:29,f:42,portion:"1 yemek kaÅŸÄ±ÄŸÄ± (15g)",pg:15,meal:["s","a"]},
  {name:"FÄ±stÄ±k Ezmesi",icon:"ğŸ¥œ",cat:"nut",cal:588,p:25,c:20,f:50,portion:"1 yemek kaÅŸÄ±ÄŸÄ± (20g)",pg:20,meal:["s","a"]},
  {name:"KarÄ±ÅŸÄ±k KuruyemiÅŸ",icon:"ğŸ¥œ",cat:"nut",cal:600,p:18,c:20,f:52,portion:"1 avuÃ§ (30g)",pg:30,meal:["s","a"]},
  {name:"Pekmez",icon:"ğŸ¯",cat:"nut",cal:293,p:0.5,c:72,f:0.2,portion:"1 yemek kaÅŸÄ±ÄŸÄ± (20g)",pg:20,meal:["s"]},
  {name:"Bal",icon:"ğŸ¯",cat:"nut",cal:304,p:0.3,c:82,f:0,portion:"1 yemek kaÅŸÄ±ÄŸÄ± (20g)",pg:20,meal:["s"]},
  {name:"Granola",icon:"ğŸ¥£",cat:"nut",cal:471,p:10,c:60,f:22,portion:"1/2 kase (50g)",pg:50,meal:["s","a"]},
  {name:"Enerji Bar",icon:"ğŸŸ¤",cat:"nut",cal:400,p:10,c:50,f:18,portion:"1 adet (40g)",pg:40,meal:["a"]},

  // â•â• TATLILAR (10) â•â•
  {name:"GÃ¼llaÃ§",icon:"ğŸŒ¹",cat:"dessert",cal:125,p:4,c:20,f:3,portion:"1 porsiyon (150g)",pg:150,meal:["i","a"]},
  {name:"SÃ¼tlaÃ§",icon:"ğŸ®",cat:"dessert",cal:130,p:4,c:22,f:3,portion:"1 kase (150g)",pg:150,meal:["i","a"]},
  {name:"Muhallebi",icon:"ğŸ®",cat:"dessert",cal:120,p:3,c:20,f:3,portion:"1 kase (150g)",pg:150,meal:["i","a"]},
  {name:"KeÅŸkÃ¼l",icon:"ğŸ®",cat:"dessert",cal:145,p:3,c:23,f:5,portion:"1 kase (150g)",pg:150,meal:["i","a"]},
  {name:"Kabak TatlÄ±sÄ±",icon:"ğŸƒ",cat:"dessert",cal:120,p:1,c:28,f:0.5,portion:"1 porsiyon (150g)",pg:150,meal:["i","a"]},
  {name:"AÅŸure",icon:"ğŸ¥£",cat:"dessert",cal:160,p:3,c:30,f:3,portion:"1 kase (200g)",pg:200,meal:["i","a"]},
  {name:"Kazandibi",icon:"ğŸ®",cat:"dessert",cal:155,p:3.5,c:25,f:5,portion:"1 porsiyon (150g)",pg:150,meal:["i","a"]},
  {name:"Tavuk GÃ¶ÄŸsÃ¼",icon:"ğŸ®",cat:"dessert",cal:140,p:4,c:24,f:3,portion:"1 porsiyon (150g)",pg:150,meal:["i","a"]},
  {name:"FÄ±rÄ±n SÃ¼tlaÃ§",icon:"ğŸ®",cat:"dessert",cal:140,p:4,c:23,f:4,portion:"1 kase (150g)",pg:150,meal:["i","a"]},
  {name:"TrileÃ§e",icon:"ğŸ®",cat:"dessert",cal:165,p:4,c:26,f:5,portion:"1 dilim (120g)",pg:120,meal:["i","a"]},
  {name:"Baklava (1 Dilim)",icon:"ğŸ¯",cat:"dessert",cal:230,p:3,c:28,f:12,portion:"1 dilim (60g)",pg:60,meal:["i","a"]},
  {name:"KÃ¼nefe",icon:"ğŸ§€",cat:"dessert",cal:350,p:7,c:38,f:19,portion:"1 porsiyon (120g)",pg:120,meal:["i"]},
  {name:"Lokma",icon:"ğŸ©",cat:"dessert",cal:260,p:3,c:35,f:12,portion:"5 adet (80g)",pg:80,meal:["i"]},
  {name:"Revani",icon:"ğŸ°",cat:"dessert",cal:220,p:3,c:35,f:8,portion:"1 dilim (80g)",pg:80,meal:["i","a"]},
  {name:"Tulumba",icon:"ğŸ©",cat:"dessert",cal:280,p:3,c:38,f:13,portion:"4 adet (80g)",pg:80,meal:["i"]},
  {name:"Ä°rmik HelvasÄ±",icon:"ğŸ¯",cat:"dessert",cal:240,p:3,c:32,f:11,portion:"1 porsiyon (80g)",pg:80,meal:["i","a"]},
  {name:"Un HelvasÄ±",icon:"ğŸ¯",cat:"dessert",cal:280,p:2,c:35,f:15,portion:"1 porsiyon (80g)",pg:80,meal:["i","a"]},
  {name:"Profiterol",icon:"ğŸ«",cat:"dessert",cal:310,p:5,c:32,f:18,portion:"3 adet (100g)",pg:100,meal:["i","a"]},
  {name:"Dondurma (MaraÅŸ)",icon:"ğŸ¦",cat:"dessert",cal:200,p:4,c:24,f:10,portion:"2 top (100g)",pg:100,meal:["i","a"]},

  // â•â• Ä°Ã‡ECEKLER (10) â•â•
  {name:"Composto",icon:"ğŸ¹",cat:"drink",cal:50,p:0.2,c:13,f:0,portion:"1 bardak (200ml)",pg:200,meal:["i"]},
  {name:"Ihlamur",icon:"ğŸµ",cat:"drink",cal:5,p:0,c:1,f:0,portion:"1 fincan (200ml)",pg:200,meal:["a","s"]},
  {name:"AdaÃ§ayÄ±",icon:"ğŸµ",cat:"drink",cal:2,p:0,c:0.5,f:0,portion:"1 fincan (200ml)",pg:200,meal:["a","s"]},
  {name:"Papatya Ã‡ayÄ±",icon:"ğŸµ",cat:"drink",cal:2,p:0,c:0.5,f:0,portion:"1 fincan (200ml)",pg:200,meal:["a","s"]},
  {name:"Nane-Limon",icon:"ğŸµ",cat:"drink",cal:5,p:0,c:1,f:0,portion:"1 fincan (200ml)",pg:200,meal:["a","s","i"]},
  {name:"Zencefil Ã‡ayÄ±",icon:"ğŸµ",cat:"drink",cal:5,p:0,c:1.2,f:0,portion:"1 fincan (200ml)",pg:200,meal:["a","s"]},
  {name:"Limonata (Az Åekerli)",icon:"ğŸ‹",cat:"drink",cal:35,p:0.1,c:9,f:0,portion:"1 bardak (250ml)",pg:250,meal:["i"]},
  {name:"Ramazan Åerbeti",icon:"ğŸ¹",cat:"drink",cal:55,p:0,c:14,f:0,portion:"1 bardak (200ml)",pg:200,meal:["i"]},
  {name:"Taze SÄ±kÄ±lmÄ±ÅŸ Portakal Suyu",icon:"ğŸŠ",cat:"drink",cal:45,p:0.7,c:10,f:0.2,portion:"1 bardak (200ml)",pg:200,meal:["i","s"]},
  {name:"Boza",icon:"ğŸ¥›",cat:"drink",cal:80,p:1,c:17,f:0.5,portion:"1 bardak (200ml)",pg:200,meal:["a"]},
  {name:"KuÅŸburnu Ã‡ayÄ±",icon:"ğŸµ",cat:"drink",cal:3,p:0,c:0.7,f:0,portion:"1 fincan (200ml)",pg:200,meal:["a","s"]},
  {name:"YeÅŸil Ã‡ay",icon:"ğŸµ",cat:"drink",cal:2,p:0,c:0.5,f:0,portion:"1 fincan (200ml)",pg:200,meal:["a"]},
  {name:"SÃ¼t (SÄ±cak BaharatlÄ±)",icon:"ğŸ¥›",cat:"drink",cal:70,p:3.3,c:6,f:3,portion:"1 bardak (200ml)",pg:200,meal:["s","a"]},
  {name:"Taze HavuÃ§ Suyu",icon:"ğŸ¥•",cat:"drink",cal:40,p:0.9,c:9,f:0.2,portion:"1 bardak (200ml)",pg:200,meal:["i","a"]},
  {name:"Karpuz Suyu",icon:"ğŸ‰",cat:"drink",cal:30,p:0.6,c:7,f:0.2,portion:"1 bardak (250ml)",pg:250,meal:["i"]},
  {name:"Nar Suyu",icon:"ğŸ«",cat:"drink",cal:60,p:0.2,c:14,f:0.1,portion:"1 bardak (200ml)",pg:200,meal:["i"]},
  {name:"KayÄ±sÄ± NektarÄ±",icon:"ğŸŸ ",cat:"drink",cal:55,p:0.3,c:14,f:0,portion:"1 bardak (200ml)",pg:200,meal:["i"]},
  {name:"Smoothie (YeÅŸil)",icon:"ğŸ¥¤",cat:"drink",cal:65,p:1.5,c:14,f:0.5,portion:"1 bardak (250ml)",pg:250,meal:["s","a"]},
  {name:"SÄ±cak Ã‡ikolata (Az Åekerli)",icon:"â˜•",cat:"drink",cal:90,p:3,c:14,f:2.5,portion:"1 fincan (200ml)",pg:200,meal:["a"]},
];

// â•â•â• Health condition warnings â•â•â•
const HEALTH_WARNINGS = {
  diabetes: [
    {icon:"ğŸ©¸",text:"Basit ÅŸekerler ve beyaz ekmek yerine tam tahÄ±llÄ± alternatifler tercih edin."},
    {icon:"ğŸ“‰",text:"Sahurda dÃ¼ÅŸÃ¼k glisemik indeksli besinler (yulaf, bulgur) seÃ§in."},
    {icon:"ğŸ¯",text:"Hurma tÃ¼ketimini 1-2 adet ile sÄ±nÄ±rlandÄ±rÄ±n."},
    {icon:"â°",text:"Kan ÅŸekerinizi dÃ¼zenli Ã¶lÃ§Ã¼n; hipoglisemi belirtilerinde orucu bozun."},
    {icon:"ğŸ¥¤",text:"Åekerli iÃ§eceklerden (komposto, ÅŸerbet) kaÃ§Ä±nÄ±n."}
  ],
  hypertension: [
    {icon:"ğŸ§‚",text:"Tuz tÃ¼ketiminizi gÃ¼nde 5g altÄ±nda tutun."},
    {icon:"ğŸ¥’",text:"TurÅŸu, salamura ve tuzlu peynirlerden kaÃ§Ä±nÄ±n."},
    {icon:"ğŸŒ",text:"Potasyum aÃ§Ä±sÄ±ndan zengin besinler (muz, avokado) tercih edin."},
    {icon:"ğŸ’Š",text:"Ä°laÃ§larÄ±nÄ±zÄ± doktor Ã¶nerisine gÃ¶re sahur veya iftarda alÄ±n."}
  ],
  kidney: [
    {icon:"ğŸ«˜",text:"Protein alÄ±mÄ±nÄ± doktorunuzun Ã¶nerdiÄŸi miktarda tutun."},
    {icon:"ğŸŒ",text:"Potasyum ve fosfor alÄ±mÄ±na dikkat edin."},
    {icon:"ğŸ’§",text:"SÄ±vÄ± alÄ±mÄ±nÄ±zÄ± doktorunuzla belirleyin."},
    {icon:"ğŸ¥œ",text:"KuruyemiÅŸ ve kuru baklagil tÃ¼ketimini sÄ±nÄ±rlayÄ±n."}
  ],
  heart: [
    {icon:"ğŸ«’",text:"DoymuÅŸ yaÄŸ yerine zeytinyaÄŸÄ± ve saÄŸlÄ±klÄ± yaÄŸlar tercih edin."},
    {icon:"ğŸŸ",text:"KÄ±zartma yemeklerinden kaÃ§Ä±nÄ±n; fÄ±rÄ±n veya Ä±zgara tercih edin."},
    {icon:"ğŸŸ",text:"Haftada 2-3 kez balÄ±k tÃ¼ketmeye Ã§alÄ±ÅŸÄ±n."},
    {icon:"ğŸ¥¬",text:"Lif aÃ§Ä±sÄ±ndan zengin besinleri artÄ±rÄ±n."}
  ],
  stomach: [
    {icon:"ğŸŒ¶ï¸",text:"AcÄ±, ekÅŸi ve baharatlÄ± yemeklerden kaÃ§Ä±nÄ±n."},
    {icon:"ğŸ½ï¸",text:"Ä°ftarda kÃ¼Ã§Ã¼k porsiyonlarla baÅŸlayÄ±n; aÅŸÄ±rÄ± yemeyin."},
    {icon:"â˜•",text:"Kahve, asitli iÃ§ecekler ve gazlÄ± iÃ§eceklerden uzak durun."},
    {icon:"ğŸ«–",text:"Zencefil veya papatya Ã§ayÄ± mide rahatsÄ±zlÄ±ÄŸÄ±na iyi gelebilir."},
    {icon:"â³",text:"Yemekler arasÄ±nda en az 2 saat bekleyin."}
  ],
  pregnancy: [
    {icon:"âš ï¸",text:"Hamilelikte oruÃ§ tutmadan Ã¶nce mutlaka doktorunuza danÄ±ÅŸÄ±n."},
    {icon:"ğŸ¥›",text:"Kalsiyum alÄ±mÄ±na dikkat edin: sÃ¼t Ã¼rÃ¼nlerini artÄ±rÄ±n."},
    {icon:"ğŸ’Š",text:"Folik asit ve demir takviyelerinizi aksatmayÄ±n."},
    {icon:"ğŸ¥©",text:"Protein ihtiyacÄ±nÄ±z artmÄ±ÅŸtÄ±r â€” her Ã¶ÄŸÃ¼nde protein kaynaÄŸÄ± bulundurun."},
    {icon:"ğŸ’§",text:"Dehidratasyon riski yÃ¼ksektir; bol sÄ±vÄ± tÃ¼ketin."}
  ]
};

// â•â•â• STATE â•â•â•
let selectedGoal = 'maintain';
let currentPlan = null;

// â•â•â• UI HELPERS â•â•â•
function selectGoal(btn) {
  document.querySelectorAll('.goal-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  selectedGoal = btn.dataset.goal;
}

function toggleCheck(el) {
  setTimeout(() => {
    const input = el.querySelector('input');
    el.classList.toggle('checked', input.checked);
  }, 0);
}

function toggleMeal(id) {
  document.getElementById(id).classList.toggle('expanded');
}

function editInputs() {
  document.getElementById('resultsSection').classList.remove('show');
  document.getElementById('inputSection').style.display = '';
  window.scrollTo({top: 0, behavior: 'smooth'});
}

// â•â•â• CALORIE CALCULATION â•â•â•
function calcBMR(weight, height, age, gender) {
  // Mifflin-St Jeor
  if (gender === 'male') {
    return 10 * weight + 6.25 * height - 5 * age + 5;
  } else {
    return 10 * weight + 6.25 * height - 5 * age - 161;
  }
}

function calcTDEE(bmr, activity) {
  const factors = {
    sedentary: 1.2,
    light: 1.375,
    moderate: 1.55,
    active: 1.725,
    very_active: 1.9
  };
  return bmr * (factors[activity] || 1.2);
}

function adjustForGoal(tdee, goal) {
  switch (goal) {
    case 'lose': return tdee * 0.80;   // 20% deficit
    case 'gain': return tdee * 1.15;   // 15% surplus
    default: return tdee;
  }
}

function calcMacros(calories, goal, weight) {
  // Protein: 1.6-2.2g/kg depending on goal
  let proteinPerKg = goal === 'gain' ? 2.0 : goal === 'lose' ? 2.0 : 1.6;
  let proteinG = Math.round(proteinPerKg * weight);
  let proteinCal = proteinG * 4;

  // Fat: 25-30% of calories
  let fatPct = goal === 'lose' ? 0.25 : 0.28;
  let fatCal = calories * fatPct;
  let fatG = Math.round(fatCal / 9);

  // Carbs: remainder
  let carbCal = calories - proteinCal - fatCal;
  let carbG = Math.round(carbCal / 4);

  // Clamp
  if (carbG < 50) {
    carbG = 50;
    carbCal = carbG * 4;
    fatCal = calories - proteinCal - carbCal;
    fatG = Math.round(fatCal / 9);
  }

  return { proteinG, carbG, fatG };
}

// â•â•â• MEAL PLAN GENERATION â•â•â•
function shuffle(arr) {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

function pickFoods(mealType, targetCal, targetP, targetC, targetF, conditions) {
  // Filter foods for this meal type
  let pool = FOODS.filter(f => f.meal.includes(mealType));

  // Filter out condition-inappropriate foods
  if (conditions.includes('diabetes')) {
    pool = pool.filter(f => f.cat !== 'dessert' || f.name === 'GÃ¼llaÃ§');
  }
  if (conditions.includes('kidney')) {
    pool = pool.filter(f => f.cat !== 'nut');
  }
  if (conditions.includes('stomach')) {
    pool = pool.filter(f => !['Ä°ÅŸkembe Ã‡orbasÄ±'].includes(f.name));
  }

  pool = shuffle(pool);

  const selected = [];
  let totalCal = 0, totalP = 0, totalC = 0, totalF = 0;

  // Category priorities per meal type
  let priorities;
  if (mealType === 's') {
    priorities = ['protein','dairy','carb','nut','veg','soup','fruit'];
  } else if (mealType === 'i') {
    priorities = ['soup','protein','carb','veg','fruit','dairy','dessert','drink'];
  } else {
    priorities = ['fruit','nut','dairy','dessert','drink'];
  }

  // Pick one from each priority category if available
  const usedNames = new Set();
  for (const cat of priorities) {
    if (totalCal >= targetCal * 0.95) break;
    const candidates = pool.filter(f => {
      if (usedNames.has(f.name)) return false;
      // Map categories
      if (cat === 'protein') return f.cat === 'protein';
      if (cat === 'dairy') return f.cat === 'dairy';
      if (cat === 'carb') return f.cat === 'carb';
      if (cat === 'nut') return f.cat === 'nut';
      if (cat === 'veg') return f.cat === 'veg';
      if (cat === 'soup') return f.cat === 'soup';
      if (cat === 'fruit') return f.cat === 'fruit';
      if (cat === 'dessert') return f.cat === 'dessert';
      if (cat === 'drink') return f.cat === 'drink';
      return false;
    });
    if (candidates.length === 0) continue;
    const pick = candidates[0];
    const portionMult = Math.max(0.5, Math.min(1.5, targetCal / 1500));
    const cal = Math.round(pick.cal * (pick.pg / 100) * portionMult);
    const p = +(pick.p * (pick.pg / 100) * portionMult).toFixed(1);
    const c = +(pick.c * (pick.pg / 100) * portionMult).toFixed(1);
    const f = +(pick.f * (pick.pg / 100) * portionMult).toFixed(1);

    selected.push({
      ...pick,
      actualCal: cal,
      actualP: p,
      actualC: c,
      actualF: f,
      actualPortion: pick.portion
    });
    totalCal += cal;
    totalP += p;
    totalC += c;
    totalF += f;
    usedNames.add(pick.name);
  }

  // If still under target, add more foods
  const extras = pool.filter(f => !usedNames.has(f.name));
  for (const pick of extras) {
    if (totalCal >= targetCal * 0.9) break;
    if (selected.length >= 8) break;
    const portionMult = Math.max(0.5, Math.min(1.5, targetCal / 1500));
    const cal = Math.round(pick.cal * (pick.pg / 100) * portionMult);
    const p = +(pick.p * (pick.pg / 100) * portionMult).toFixed(1);
    const c = +(pick.c * (pick.pg / 100) * portionMult).toFixed(1);
    const f = +(pick.f * (pick.pg / 100) * portionMult).toFixed(1);
    selected.push({
      ...pick,
      actualCal: cal,
      actualP: p,
      actualC: c,
      actualF: f,
      actualPortion: pick.portion
    });
    totalCal += cal;
    totalP += p;
    totalC += c;
    totalF += f;
    usedNames.add(pick.name);
  }

  return { items: selected, totalCal: Math.round(totalCal), totalP: Math.round(totalP), totalC: Math.round(totalC), totalF: Math.round(totalF) };
}

// â•â•â• MAIN GENERATE â•â•â•
function generatePlan() {
  const weight = +document.getElementById('weight').value;
  const height = +document.getElementById('height').value;
  const age = +document.getElementById('age').value;
  const gender = document.getElementById('gender').value;
  const activity = document.getElementById('activity').value;

  // Validation
  if (!weight || !height || !age || !gender || !activity) {
    alert('LÃ¼tfen tÃ¼m kiÅŸisel bilgileri doldurun.');
    return;
  }
  if (weight < 30 || weight > 300 || height < 100 || height > 250 || age < 12 || age > 100) {
    alert('LÃ¼tfen geÃ§erli deÄŸerler girin.');
    return;
  }

  const conditions = [];
  document.querySelectorAll('.checkbox-item input:checked').forEach(cb => conditions.push(cb.value));

  // Calculate
  const bmr = calcBMR(weight, height, age, gender);
  const tdee = calcTDEE(bmr, activity);
  const targetCal = Math.round(adjustForGoal(tdee, selectedGoal));
  const macros = calcMacros(targetCal, selectedGoal, weight);

  // Ramazan adjustment: compress into 2 meals + snack window
  // Sahur: ~35%, Iftar: ~45%, Snack: ~20%
  const sahurCal = Math.round(targetCal * 0.35);
  const iftarCal = Math.round(targetCal * 0.45);
  const snackCal = Math.round(targetCal * 0.20);

  const sahurP = Math.round(macros.proteinG * 0.35);
  const sahurC = Math.round(macros.carbG * 0.35);
  const sahurF = Math.round(macros.fatG * 0.35);
  const iftarP = Math.round(macros.proteinG * 0.45);
  const iftarC = Math.round(macros.carbG * 0.45);
  const iftarF = Math.round(macros.fatG * 0.45);
  const snackP = Math.round(macros.proteinG * 0.20);
  const snackC = Math.round(macros.carbG * 0.20);
  const snackF = Math.round(macros.fatG * 0.20);

  const sahur = pickFoods('s', sahurCal, sahurP, sahurC, sahurF, conditions);
  const iftar = pickFoods('i', iftarCal, iftarP, iftarC, iftarF, conditions);
  const snack = pickFoods('a', snackCal, snackP, snackC, snackF, conditions);

  // Water calculation: ~30-35ml per kg
  const waterLiters = +(weight * 0.033).toFixed(1);
  const waterGlasses = Math.round(waterLiters * 5); // 200ml glasses

  currentPlan = { targetCal, macros, sahur, iftar, snack, waterLiters, waterGlasses, conditions, weight, height, age, gender, activity };

  renderResults(currentPlan);
}

function regeneratePlan() {
  if (!currentPlan) return;
  // Re-generate with same parameters
  const { targetCal, macros, conditions, weight } = currentPlan;
  const sahurCal = Math.round(targetCal * 0.35);
  const iftarCal = Math.round(targetCal * 0.45);
  const snackCal = Math.round(targetCal * 0.20);

  const sahur = pickFoods('s', sahurCal, 0, 0, 0, conditions);
  const iftar = pickFoods('i', iftarCal, 0, 0, 0, conditions);
  const snack = pickFoods('a', snackCal, 0, 0, 0, conditions);

  const waterLiters = +(weight * 0.033).toFixed(1);
  const waterGlasses = Math.round(waterLiters * 5);

  currentPlan.sahur = sahur;
  currentPlan.iftar = iftar;
  currentPlan.snack = snack;

  renderResults(currentPlan);

  // Scroll to top of results
  document.getElementById('summaryBanner').scrollIntoView({ behavior: 'smooth' });
}

// â•â•â• BUILD OWN PLAN (Bowl Builder Mode) â•â•â•
function buildOwnPlan() {
  const weight = +document.getElementById('weight').value;
  const height = +document.getElementById('height').value;
  const age = +document.getElementById('age').value;
  const gender = document.getElementById('gender').value;
  const activity = document.getElementById('activity').value;

  if (!weight || !height || !age || !gender || !activity) {
    alert('LÃ¼tfen tÃ¼m kiÅŸisel bilgileri doldurun.');
    return;
  }
  if (weight < 30 || weight > 300 || height < 100 || height > 250 || age < 12 || age > 100) {
    alert('LÃ¼tfen geÃ§erli deÄŸerler girin.');
    return;
  }

  const conditions = [];
  document.querySelectorAll('.checkbox-item input:checked').forEach(cb => conditions.push(cb.value));

  const bmr = calcBMR(weight, height, age, gender);
  const tdee = calcTDEE(bmr, activity);
  const targetCal = Math.round(adjustForGoal(tdee, selectedGoal));
  const macros = calcMacros(targetCal, selectedGoal, weight);

  // Create empty plan with targets
  const sahur = { items: [], totalCal: 0, totalP: 0, totalC: 0, totalF: 0 };
  const iftar = { items: [], totalCal: 0, totalP: 0, totalC: 0, totalF: 0 };
  const snack = { items: [], totalCal: 0, totalP: 0, totalC: 0, totalF: 0 };

  const waterLiters = +(weight * 0.033).toFixed(1);
  const waterGlasses = Math.round(waterLiters * 5);

  currentPlan = { targetCal, macros, sahur, iftar, snack, waterLiters, waterGlasses, conditions, weight, height, age, gender, activity };

  // Reset menu selections
  menuSelections = { sahur: [], iftar: [], snack: [] };

  renderResults(currentPlan);

  // Auto-open builder and scroll to it
  setTimeout(() => {
    const builder = document.getElementById('menuBuilder');
    if (!builder.classList.contains('open')) builder.classList.add('open');
    initMenuBuilder();
    renderBasket();
    builder.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }, 300);
}

// â•â•â• RENDER â•â•â•
function renderResults(plan) {
  const { targetCal, macros, sahur, iftar, snack, waterLiters, waterGlasses, conditions } = plan;

  // Hide input, show results
  document.getElementById('inputSection').style.display = 'none';
  const rs = document.getElementById('resultsSection');
  rs.classList.add('show');

  // Summary
  document.getElementById('totalCal').textContent = targetCal;
  document.getElementById('totalProtein').textContent = macros.proteinG + 'g';
  document.getElementById('totalCarb').textContent = macros.carbG + 'g';
  document.getElementById('totalFat').textContent = macros.fatG + 'g';

  // Macro % bars
  const totalMacroCal = macros.proteinG * 4 + macros.carbG * 4 + macros.fatG * 9;
  const pPct = Math.round((macros.proteinG * 4 / totalMacroCal) * 100);
  const fPct = Math.round((macros.fatG * 9 / totalMacroCal) * 100);
  const cPct = 100 - pPct - fPct;

  setTimeout(() => {
    document.getElementById('barProtein').style.width = pPct + '%';
    document.getElementById('barProteinVal').textContent = pPct + '%';
    document.getElementById('barFat').style.width = fPct + '%';
    document.getElementById('barFatVal').textContent = fPct + '%';
    document.getElementById('barCarb').style.width = cPct + '%';
    document.getElementById('barCarbVal').textContent = cPct + '%';
  }, 100);

  // Render meals
  renderMeal('sahur', sahur);
  renderMeal('iftar', iftar);
  renderMeal('snack', snack);

  // Hydration
  document.getElementById('waterTotal').textContent = waterLiters;
  document.getElementById('waterGlasses').textContent = waterGlasses;

  // Warnings
  const warningCard = document.getElementById('warningCard');
  const warningList = document.getElementById('warningList');
  warningList.innerHTML = '';
  let hasWarnings = false;
  for (const cond of conditions) {
    if (HEALTH_WARNINGS[cond]) {
      hasWarnings = true;
      for (const w of HEALTH_WARNINGS[cond]) {
        warningList.innerHTML += `<li><span class="w-icon">${w.icon}</span>${w.text}</li>`;
      }
    }
  }
  warningCard.classList.toggle('show', hasWarnings);

  // Expand sahur and iftar by default, collapse snack
  document.getElementById('sahurCard').classList.add('expanded');
  document.getElementById('iftarCard').classList.add('expanded');
  document.getElementById('snackCard').classList.remove('expanded');

  // Auto-open bowl builder and sync with plan
  setTimeout(() => {
    const builder = document.getElementById('menuBuilder');
    if (!builder.classList.contains('open')) builder.classList.add('open');
    syncMenuWithPlan();
    initMenuBuilder();
    renderBasket();
    // Render shopping list if open
    if (document.getElementById('shoppingCard').classList.contains('expanded')) {
      renderShoppingList();
    }
  }, 200);

  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function renderMeal(prefix, meal) {
  const listEl = document.getElementById(prefix + 'Foods');
  const calEl = document.getElementById(prefix + 'Cal');

  listEl.innerHTML = '';
  let totalCal = 0, totalP = 0, totalC = 0, totalF = 0;
  let idx = -1;

  for (const item of meal.items) {
    idx++;
    totalCal += item.actualCal;
    totalP += item.actualP;
    totalC += item.actualC;
    totalF += item.actualF;

    listEl.innerHTML += `
      <li class="food-item" id="${prefix}-food-${idx}">
        <div class="food-item-icon">${item.icon}</div>
        <div class="food-item-info">
          <div class="food-item-name">${item.name}</div>
          <div class="food-item-portion">${item.actualPortion}</div>
          <div class="food-item-macros">
            <span class="m-p">P: ${item.actualP.toFixed(0)}g</span>
            <span class="m-c">K: ${item.actualC.toFixed(0)}g</span>
            <span class="m-f">Y: ${item.actualF.toFixed(0)}g</span>
          </div>
        </div>
        <div class="food-item-cal">${item.actualCal} kcal</div>
        <button class="food-swap-btn no-print" onclick="swapFood('${prefix}',${idx})" title="DeÄŸiÅŸtir">ğŸ”„</button>
      </li>`;
  }

  calEl.textContent = Math.round(totalCal);

  // Mini macro bars (scale to max value)
  const maxMacro = Math.max(totalP, totalC, totalF, 1);
  const setBar = (id, val) => {
    setTimeout(() => {
      document.getElementById(id).style.width = Math.round((val / maxMacro) * 100) + '%';
    }, 200);
  };

  setBar(prefix + 'ProteinBar', totalP);
  setBar(prefix + 'CarbBar', totalC);
  setBar(prefix + 'FatBar', totalF);
  document.getElementById(prefix + 'ProteinVal').textContent = Math.round(totalP) + 'g';
  document.getElementById(prefix + 'CarbVal').textContent = Math.round(totalC) + 'g';
  document.getElementById(prefix + 'FatVal').textContent = Math.round(totalF) + 'g';
}

// â•â•â• BOWL BUILDER / MENÃœ â•â•â•
const CAT_LABELS = {
  protein:{label:'ğŸ¥© Protein',order:1},
  soup:{label:'ğŸ² Ã‡orba',order:2},
  carb:{label:'ğŸ TahÄ±l',order:3},
  dairy:{label:'ğŸ§€ SÃ¼t ÃœrÃ¼nleri',order:4},
  veg:{label:'ğŸ¥— Sebze',order:5},
  fruit:{label:'ğŸ Meyve',order:6},
  nut:{label:'ğŸ¥œ KuruyemiÅŸ',order:7},
  dessert:{label:'ğŸ® TatlÄ±',order:8},
  drink:{label:'ğŸµ Ä°Ã§ecek',order:9}
};

let menuMeal = 'sahur'; // current meal tab
let menuCat = 'all';    // current category filter
let menuSelections = { sahur: [], iftar: [], snack: [] };

function toggleMenuBuilder() {
  document.getElementById('menuBuilder').classList.toggle('open');
  // Initialize on first open
  if (!document.getElementById('catPills').innerHTML) {
    initMenuBuilder();
  }
}

function initMenuBuilder() {
  // Build category pills
  const pillsEl = document.getElementById('catPills');
  let html = '<button class="cat-pill active" onclick="setMenuCat(\'all\')">TÃ¼mÃ¼</button>';
  const mealCode = menuMeal === 'sahur' ? 's' : menuMeal === 'iftar' ? 'i' : 'a';
  for (const [cat, info] of Object.entries(CAT_LABELS)) {
    const count = FOODS.filter(f => f.cat === cat && f.meal.includes(mealCode)).length;
    if (count > 0) {
      html += `<button class="cat-pill" onclick="setMenuCat('${cat}')">${info.label} <span class="cat-count">(${count})</span></button>`;
    }
  }
  pillsEl.innerHTML = html;
  renderMenuGrid();
}

function setMenuMeal(meal) {
  menuMeal = meal;
  document.querySelectorAll('.meal-tab').forEach(t => t.classList.remove('active'));
  event.target.closest('.meal-tab').classList.add('active');
  menuCat = 'all';
  initMenuBuilder();
  renderBasket();
  updateTargetProgress();
}

function setMenuCat(cat) {
  menuCat = cat;
  document.querySelectorAll('.cat-pill').forEach(p => p.classList.remove('active'));
  event.target.closest('.cat-pill').classList.add('active');
  renderMenuGrid();
}

function renderMenuGrid() {
  const gridEl = document.getElementById('menuGrid');
  const mealCode = menuMeal === 'sahur' ? 's' : menuMeal === 'iftar' ? 'i' : 'a';
  const selectedNames = new Set(menuSelections[menuMeal].map(f => f.name));

  let foods = FOODS.filter(f => f.meal.includes(mealCode));
  if (menuCat !== 'all') foods = foods.filter(f => f.cat === menuCat);

  // Sort by category order
  foods.sort((a, b) => (CAT_LABELS[a.cat]?.order || 99) - (CAT_LABELS[b.cat]?.order || 99));

  const portionMult = currentPlan ? Math.max(0.5, Math.min(1.5, currentPlan.targetCal / 1500)) : 1;

  gridEl.innerHTML = foods.map((f, i) => {
    const cal = Math.round(f.cal * (f.pg / 100) * portionMult);
    const p = Math.round(f.p * (f.pg / 100) * portionMult);
    const c = Math.round(f.c * (f.pg / 100) * portionMult);
    const fat = Math.round(f.f * (f.pg / 100) * portionMult);
    const inMeal = selectedNames.has(f.name);
    return `<div class="menu-food ${inMeal ? 'in-meal' : ''}" onclick="toggleMenuFood('${f.name.replace(/'/g, "\\'")}')">
      <div class="mf-icon">${f.icon}</div>
      <div class="mf-info">
        <div class="mf-name">${f.name}</div>
        <div class="mf-meta">${f.portion}</div>
        <div class="mf-macros">P:${p}g Â· K:${c}g Â· Y:${fat}g</div>
      </div>
      <div class="mf-cal">${cal}<span style="font-size:.55rem;display:block;opacity:.6">kcal</span></div>
      <div class="mf-add">${inMeal ? 'âœ“' : '+'}</div>
    </div>`;
  }).join('');
}

function toggleMenuFood(foodName) {
  const sel = menuSelections[menuMeal];
  const idx = sel.findIndex(f => f.name === foodName);

  if (idx !== -1) {
    // Remove
    sel.splice(idx, 1);
  } else {
    // Add
    const food = FOODS.find(f => f.name === foodName);
    if (!food) return;
    const portionMult = currentPlan ? Math.max(0.5, Math.min(1.5, currentPlan.targetCal / 1500)) : 1;
    sel.push({
      ...food,
      actualCal: Math.round(food.cal * (food.pg / 100) * portionMult),
      actualP: +(food.p * (food.pg / 100) * portionMult).toFixed(1),
      actualC: +(food.c * (food.pg / 100) * portionMult).toFixed(1),
      actualF: +(food.f * (food.pg / 100) * portionMult).toFixed(1),
      actualPortion: food.portion
    });
  }

  renderMenuGrid();
  renderBasket();
}

function renderBasket() {
  const sel = menuSelections[menuMeal];
  const itemsEl = document.getElementById('basketItems');
  const countEl = document.getElementById('basketCount');

  if (sel.length === 0) {
    itemsEl.innerHTML = '<span class="basket-empty">AÅŸaÄŸÄ±dan yemek ekleyin...</span>';
    countEl.textContent = '0 yemek';
  } else {
    itemsEl.innerHTML = sel.map(f =>
      `<span class="basket-chip" onclick="toggleMenuFood('${f.name.replace(/'/g, "\\'")}')">${f.icon} ${f.name} <span class="chip-x">âœ•</span></span>`
    ).join('');
    countEl.textContent = sel.length + ' yemek';
  }

  // Update running total for current meal
  const totalCal = sel.reduce((s, f) => s + f.actualCal, 0);
  const totalP = sel.reduce((s, f) => s + f.actualP, 0);
  const totalC = sel.reduce((s, f) => s + f.actualC, 0);
  const totalF = sel.reduce((s, f) => s + f.actualF, 0);

  document.getElementById('rtCal').textContent = Math.round(totalCal);
  document.getElementById('rtP').textContent = Math.round(totalP);
  document.getElementById('rtC').textContent = Math.round(totalC);
  document.getElementById('rtF').textContent = Math.round(totalF);

  // Update tab calorie counts
  for (const m of ['sahur','iftar','snack']) {
    const mCal = menuSelections[m].reduce((s, f) => s + f.actualCal, 0);
    const tabEl = document.getElementById(`menu${m.charAt(0).toUpperCase()+m.slice(1)}Cal`);
    if (tabEl) tabEl.textContent = mCal > 0 ? `(${Math.round(mCal)})` : '';
  }

  // Update calorie target progress
  updateTargetProgress();
}

function updateTargetProgress() {
  if (!currentPlan) return;
  const { targetCal } = currentPlan;

  // Calculate target per meal
  const mealTargets = {
    sahur: Math.round(targetCal * 0.35),
    iftar: Math.round(targetCal * 0.45),
    snack: Math.round(targetCal * 0.20)
  };

  const target = mealTargets[menuMeal] || 0;
  const sel = menuSelections[menuMeal];
  const current = sel.reduce((s, f) => s + f.actualCal, 0);
  const pct = target > 0 ? Math.min(Math.round((current / target) * 100), 150) : 0;

  // Update target labels
  const targetCalLabel = document.getElementById('targetCalLabel');
  const targetCurrentEl = document.getElementById('targetCurrent');
  const targetBarFill = document.getElementById('targetBarFill');
  const mealNames = { sahur: 'ğŸŒ™ Sahur', iftar: 'ğŸŒ… Ä°ftar', snack: 'ğŸ«– Ara Ã–ÄŸÃ¼n' };

  if (targetCalLabel) targetCalLabel.textContent = target;
  const labelEl = document.getElementById('targetLabel');
  if (labelEl) labelEl.innerHTML = `ğŸ¯ ${mealNames[menuMeal] || ''} Hedef: <b>${target}</b> kcal`;

  if (targetCurrentEl) {
    targetCurrentEl.textContent = `${Math.round(current)} / ${target} kcal`;
    if (pct >= 85 && pct <= 110) {
      targetCurrentEl.style.color = '#16a34a'; // green = perfect
    } else if (pct > 110) {
      targetCurrentEl.style.color = '#dc2626'; // red = over
    } else {
      targetCurrentEl.style.color = 'var(--primary)';
    }
  }

  if (targetBarFill) {
    targetBarFill.style.width = Math.min(pct, 100) + '%';
    targetBarFill.classList.remove('over', 'perfect');
    if (pct > 110) targetBarFill.classList.add('over');
    else if (pct >= 85 && pct <= 110) targetBarFill.classList.add('perfect');
  }

  // Update meal tab targets
  for (const m of ['sahur', 'iftar', 'snack']) {
    const mCal = menuSelections[m].reduce((s, f) => s + f.actualCal, 0);
    const mTarget = mealTargets[m];
    const tabEl = document.getElementById(`menu${m.charAt(0).toUpperCase() + m.slice(1)}Cal`);
    if (tabEl) {
      if (mCal > 0) {
        tabEl.textContent = `(${Math.round(mCal)}/${mTarget})`;
      } else {
        tabEl.textContent = `(${mTarget})`;
      }
    }
  }
}

function applyMenuSelections() {
  if (!currentPlan) { alert('Ã–nce kiÅŸisel bilgileri girin ve plan oluÅŸturun.'); return; }

  let applied = 0;
  // Apply selections to the plan for each meal that has selections
  for (const mealKey of ['sahur','iftar','snack']) {
    if (menuSelections[mealKey].length > 0) {
      currentPlan[mealKey].items = [...menuSelections[mealKey]];
      renderMeal(mealKey, currentPlan[mealKey]);
      applied += menuSelections[mealKey].length;
    }
  }
  updateTotals();

  // Expand meal cards so the user sees the result
  document.getElementById('sahurCard').classList.add('expanded');
  document.getElementById('iftarCard').classList.add('expanded');
  if (menuSelections.snack.length > 0) document.getElementById('snackCard').classList.add('expanded');

  // Scroll to first meal card
  document.getElementById('sahurCard').scrollIntoView({ behavior: 'smooth', block: 'start' });

  // Refresh shopping list
  if (document.getElementById('shoppingCard').classList.contains('expanded')) {
    shoppingChecked.clear();
    renderShoppingList();
  }

  // Visual feedback
  const btn = event.target.closest('.btn');
  const orig = btn.innerHTML;
  btn.innerHTML = `âœ… ${applied} yemek uygulandÄ±!`;
  setTimeout(() => btn.innerHTML = orig, 2500);
}

function clearMenuSelections() {
  menuSelections[menuMeal] = [];
  renderMenuGrid();
  renderBasket();
}

function clearAllMenuSelections() {
  menuSelections = { sahur: [], iftar: [], snack: [] };
  renderMenuGrid();
  renderBasket();
}

// Initialize menu with current plan foods when plan is generated
function syncMenuWithPlan() {
  if (!currentPlan) return;
  menuSelections.sahur = [...currentPlan.sahur.items];
  menuSelections.iftar = [...currentPlan.iftar.items];
  menuSelections.snack = [...currentPlan.snack.items];
}

// â•â•â• SWAP FOOD â•â•â•
function swapFood(mealType, foodIndex) {
  if (!currentPlan) return;

  // Get the meal data
  const mealKey = mealType; // 'sahur', 'iftar', or 'snack'
  const meal = currentPlan[mealKey];
  if (!meal || !meal.items[foodIndex]) return;

  const oldFood = meal.items[foodIndex];
  const mealCode = mealKey === 'sahur' ? 's' : mealKey === 'iftar' ? 'i' : 'a';

  // Get names of all foods currently in this meal (to avoid duplicates)
  const usedNames = new Set(meal.items.map(i => i.name));

  // Filter conditions
  const conditions = currentPlan.conditions || [];

  // Find alternatives: same category, suitable for this meal, not already used
  let candidates = FOODS.filter(f => {
    if (f.name === oldFood.name) return false;
    if (usedNames.has(f.name)) return false;
    if (!f.meal.includes(mealCode)) return false;
    // Same category preferred, but allow similar categories
    if (f.cat !== oldFood.cat) return false;
    // Condition filters
    if (conditions.includes('diabetes') && f.cat === 'dessert' && f.name !== 'GÃ¼llaÃ§') return false;
    if (conditions.includes('kidney') && f.cat === 'nut') return false;
    return true;
  });

  // If no same-category alternative, try nearby categories
  if (candidates.length === 0) {
    const similarCats = {
      'protein': ['dairy','veg'],
      'dairy': ['protein'],
      'carb': ['veg'],
      'soup': ['veg','drink'],
      'veg': ['soup','carb'],
      'fruit': ['nut','drink'],
      'nut': ['fruit','dairy'],
      'dessert': ['fruit'],
      'drink': ['fruit']
    };
    const fallbackCats = similarCats[oldFood.cat] || [];
    candidates = FOODS.filter(f => {
      if (f.name === oldFood.name) return false;
      if (usedNames.has(f.name)) return false;
      if (!f.meal.includes(mealCode)) return false;
      if (!fallbackCats.includes(f.cat)) return false;
      if (conditions.includes('diabetes') && f.cat === 'dessert') return false;
      if (conditions.includes('kidney') && f.cat === 'nut') return false;
      return true;
    });
  }

  if (candidates.length === 0) {
    // No alternatives available â€” brief visual feedback
    const el = document.getElementById(`${mealType}-food-${foodIndex}`);
    if (el) {
      const btn = el.querySelector('.food-swap-btn');
      if (btn) { btn.textContent = 'âŒ'; setTimeout(() => btn.textContent = 'ğŸ”„', 1000); }
    }
    return;
  }

  // Pick random alternative
  const newFood = candidates[Math.floor(Math.random() * candidates.length)];

  // Calculate macros with same portion multiplier as original plan
  const portionMult = Math.max(0.5, Math.min(1.5, currentPlan.targetCal / 1500));
  const newItem = {
    ...newFood,
    actualCal: Math.round(newFood.cal * (newFood.pg / 100) * portionMult),
    actualP: +(newFood.p * (newFood.pg / 100) * portionMult).toFixed(1),
    actualC: +(newFood.c * (newFood.pg / 100) * portionMult).toFixed(1),
    actualF: +(newFood.f * (newFood.pg / 100) * portionMult).toFixed(1),
    actualPortion: newFood.portion
  };

  // Animate swap
  const el = document.getElementById(`${mealType}-food-${foodIndex}`);
  if (el) el.classList.add('swapping');

  // Replace in data
  meal.items[foodIndex] = newItem;

  // Re-render this meal after animation
  setTimeout(() => {
    renderMeal(mealType, meal);
    // Update totals
    updateTotals();
  }, 150);
}

function updateTotals() {
  if (!currentPlan) return;
  const { sahur, iftar, snack, macros } = currentPlan;

  // Recalculate actual totals from current items
  let totalCal = 0;
  [sahur, iftar, snack].forEach(meal => {
    meal.items.forEach(item => { totalCal += item.actualCal; });
    // Recalculate meal totals
    meal.totalCal = meal.items.reduce((s, i) => s + i.actualCal, 0);
    meal.totalP = meal.items.reduce((s, i) => s + i.actualP, 0);
    meal.totalC = meal.items.reduce((s, i) => s + i.actualC, 0);
    meal.totalF = meal.items.reduce((s, i) => s + i.actualF, 0);
  });

  // Update summary banner with actual totals
  const actualP = Math.round(sahur.totalP + iftar.totalP + snack.totalP);
  const actualC = Math.round(sahur.totalC + iftar.totalC + snack.totalC);
  const actualF = Math.round(sahur.totalF + iftar.totalF + snack.totalF);
  const actualCal = Math.round(sahur.totalCal + iftar.totalCal + snack.totalCal);

  document.getElementById('totalCal').textContent = actualCal;
  document.getElementById('totalProtein').textContent = actualP + 'g';
  document.getElementById('totalCarb').textContent = actualC + 'g';
  document.getElementById('totalFat').textContent = actualF + 'g';

  const totalMacroCal = actualP * 4 + actualC * 4 + actualF * 9;
  if (totalMacroCal > 0) {
    const pPct = Math.round((actualP * 4 / totalMacroCal) * 100);
    const fPct = Math.round((actualF * 9 / totalMacroCal) * 100);
    const cPct = 100 - pPct - fPct;
    document.getElementById('barProtein').style.width = pPct + '%';
    document.getElementById('barProteinVal').textContent = pPct + '%';
    document.getElementById('barFat').style.width = fPct + '%';
    document.getElementById('barFatVal').textContent = fPct + '%';
    document.getElementById('barCarb').style.width = cPct + '%';
    document.getElementById('barCarbVal').textContent = cPct + '%';
  }
}

// â•â•â• SHARE â•â•â•
function sharePlan() {
  if (!currentPlan) return;
  const { targetCal, macros, sahur, iftar } = currentPlan;
  const sahurItems = sahur.items.map(i => `  â€¢ ${i.name}`).join('\n');
  const iftarItems = iftar.items.map(i => `  â€¢ ${i.name}`).join('\n');

  const text = `â˜ªï¸ Ramazan Ã–ÄŸÃ¼n PlanÄ±m

ğŸ“Š GÃ¼nlÃ¼k: ${targetCal} kcal
ğŸŸ  Protein: ${macros.proteinG}g | ğŸŸ¢ Karb: ${macros.carbG}g | ğŸ”´ YaÄŸ: ${macros.fatG}g

ğŸŒ™ Sahur:
${sahurItems}

ğŸŒ… Ä°ftar:
${iftarItems}

ğŸ”— Kendi planÄ±nÄ± oluÅŸtur: uzunyasa.com/pages/araclar/sahur-iftar-planlayici.html`;

  if (navigator.share) {
    navigator.share({ text }).catch(() => {});
  } else if (navigator.clipboard) {
    navigator.clipboard.writeText(text).then(() => {
      const btn = event.target.closest('.btn');
      const orig = btn.innerHTML;
      btn.innerHTML = 'âœ… KopyalandÄ±!';
      setTimeout(() => btn.innerHTML = orig, 2000);
    });
  }
}

// â•â•â• SHOPPING LIST â•â•â•
let shoppingDays = 1;
let shoppingChecked = new Set();

function toggleShopping() {
  const card = document.getElementById('shoppingCard');
  card.classList.toggle('expanded');
  if (card.classList.contains('expanded')) {
    renderShoppingList();
  }
}

function setShoppingDays(days) {
  shoppingDays = days;
  document.querySelectorAll('.shopping-day-tab').forEach(t => t.classList.remove('active'));
  event.target.closest('.shopping-day-tab').classList.add('active');
  shoppingChecked.clear();
  renderShoppingList();
}

function getShoppingItems() {
  if (!currentPlan) return [];
  const { sahur, iftar, snack } = currentPlan;

  // Collect all foods from all meals
  const foodMap = new Map(); // name â†’ { icon, portion, cat, quantity }
  const allItems = [...sahur.items, ...iftar.items, ...snack.items];

  for (const item of allItems) {
    if (foodMap.has(item.name)) {
      foodMap.get(item.name).quantity += shoppingDays;
    } else {
      foodMap.set(item.name, {
        name: item.name,
        icon: item.icon,
        cat: item.cat,
        portion: item.actualPortion || item.portion,
        quantity: shoppingDays
      });
    }
  }

  // Also add water
  if (currentPlan.waterLiters) {
    const totalWater = +(currentPlan.waterLiters * shoppingDays).toFixed(1);
    foodMap.set('Su', {
      name: 'Su',
      icon: 'ğŸ’§',
      cat: 'drink',
      portion: `${totalWater} litre`,
      quantity: 1
    });
  }

  return Array.from(foodMap.values());
}

function renderShoppingList() {
  const listEl = document.getElementById('shoppingList');
  const items = getShoppingItems();

  if (items.length === 0) {
    listEl.innerHTML = '<p style="text-align:center;color:var(--gray-400);font-size:.85rem;padding:1rem">Ã–nce bir Ã¶ÄŸÃ¼n planÄ± oluÅŸturun.</p>';
    return;
  }

  // Group by category
  const catOrder = ['protein','soup','carb','dairy','veg','fruit','nut','dessert','drink'];
  const catNames = {
    protein: { icon: 'ğŸ¥©', name: 'Et, BalÄ±k & Baklagil' },
    soup: { icon: 'ğŸ²', name: 'Ã‡orba Malzemeleri' },
    carb: { icon: 'ğŸ', name: 'TahÄ±l & Ekmek' },
    dairy: { icon: 'ğŸ§€', name: 'SÃ¼t ÃœrÃ¼nleri' },
    veg: { icon: 'ğŸ¥—', name: 'Sebze & Salata' },
    fruit: { icon: 'ğŸ', name: 'Meyve' },
    nut: { icon: 'ğŸ¥œ', name: 'KuruyemiÅŸ & AtÄ±ÅŸtÄ±rmalÄ±k' },
    dessert: { icon: 'ğŸ®', name: 'TatlÄ±' },
    drink: { icon: 'ğŸµ', name: 'Ä°Ã§ecek' }
  };

  const groups = {};
  for (const item of items) {
    if (!groups[item.cat]) groups[item.cat] = [];
    groups[item.cat].push(item);
  }

  let html = '';
  for (const cat of catOrder) {
    if (!groups[cat] || groups[cat].length === 0) continue;
    const info = catNames[cat] || { icon: 'ğŸ“¦', name: cat };
    const catItems = groups[cat];

    html += `<div class="shopping-category">
      <div class="shopping-cat-header">
        <span class="sc-icon">${info.icon}</span>
        <span class="sc-name">${info.name}</span>
        <span class="sc-count">${catItems.length} Ã¼rÃ¼n</span>
      </div>`;

    for (const item of catItems) {
      const key = item.name;
      const checked = shoppingChecked.has(key);
      const portionText = item.quantity > 1
        ? `${item.portion} Ã— ${item.quantity} gÃ¼n`
        : item.portion;

      html += `<div class="shopping-item ${checked ? 'checked' : ''}" onclick="toggleShoppingItem('${key.replace(/'/g, "\\'")}')">
        <div class="si-check"></div>
        <span class="si-icon">${item.icon}</span>
        <span class="si-name">${item.name}</span>
        <span class="si-portion">${portionText}</span>
      </div>`;
    }

    html += '</div>';
  }

  listEl.innerHTML = html;
  updateShoppingSummary(items);
}

function toggleShoppingItem(name) {
  if (shoppingChecked.has(name)) {
    shoppingChecked.delete(name);
  } else {
    shoppingChecked.add(name);
  }
  renderShoppingList();
}

function updateShoppingSummary(items) {
  const total = items.length;
  const checked = shoppingChecked.size;
  document.getElementById('shoppingTotal').textContent = `${total} Ã¼rÃ¼n`;
  document.getElementById('shoppingChecked').textContent = checked > 0
    ? `âœ“ ${checked} / ${total} alÄ±ndÄ±`
    : '0 alÄ±ndÄ±';
}

function resetShoppingChecks() {
  shoppingChecked.clear();
  renderShoppingList();
}

function buildShoppingText() {
  const items = getShoppingItems();
  if (items.length === 0) return '';

  const catNames = {
    protein: 'ğŸ¥© Et, BalÄ±k & Baklagil',
    soup: 'ğŸ² Ã‡orba Malzemeleri',
    carb: 'ğŸ TahÄ±l & Ekmek',
    dairy: 'ğŸ§€ SÃ¼t ÃœrÃ¼nleri',
    veg: 'ğŸ¥— Sebze & Salata',
    fruit: 'ğŸ Meyve',
    nut: 'ğŸ¥œ KuruyemiÅŸ',
    dessert: 'ğŸ® TatlÄ±',
    drink: 'ğŸµ Ä°Ã§ecek'
  };
  const catOrder = ['protein','soup','carb','dairy','veg','fruit','nut','dessert','drink'];

  const groups = {};
  for (const item of items) {
    if (!groups[item.cat]) groups[item.cat] = [];
    groups[item.cat].push(item);
  }

  const dayLabel = shoppingDays === 1 ? '1 gÃ¼nlÃ¼k' : shoppingDays === 3 ? '3 gÃ¼nlÃ¼k' : 'haftalÄ±k';
  let text = `ğŸ›’ Ramazan AlÄ±ÅŸveriÅŸ Listesi (${dayLabel})\n\n`;

  for (const cat of catOrder) {
    if (!groups[cat] || groups[cat].length === 0) continue;
    text += `${catNames[cat] || cat}\n`;
    for (const item of groups[cat]) {
      const portionText = item.quantity > 1
        ? `${item.portion} Ã— ${item.quantity}`
        : item.portion;
      text += `  â˜ ${item.name} â€” ${portionText}\n`;
    }
    text += '\n';
  }

  text += 'ğŸ”— uzunyasa.com/pages/araclar/sahur-iftar-planlayici.html';
  return text;
}

function copyShoppingList() {
  const text = buildShoppingText();
  if (!text) return;
  if (navigator.clipboard) {
    navigator.clipboard.writeText(text).then(() => {
      const btn = event.target.closest('.btn');
      const orig = btn.innerHTML;
      btn.innerHTML = 'âœ… KopyalandÄ±!';
      setTimeout(() => btn.innerHTML = orig, 2000);
    });
  }
}

function shareShoppingList() {
  const text = buildShoppingText();
  if (!text) return;
  if (navigator.share) {
    navigator.share({ title: 'Ramazan AlÄ±ÅŸveriÅŸ Listesi', text }).catch(() => {});
  } else {
    copyShoppingList();
  }
}
</script>
</body>
</html>
